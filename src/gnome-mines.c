/* gnome-mines.c generated by valac 0.22.1, the Vala compiler
 * generated from gnome-mines.vala, do not modify */

/*
 * Copyright (C) 2011-2012 Robert Ancell
 *
 * This program is free software: you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation, either version 2 of the License, or (at your option) any later
 * version. See http://www.gnu.org/copyleft/gpl.html the full text of the
 * license.
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gio/gio.h>
#include <stdlib.h>
#include <string.h>
#include <glib/gi18n-lib.h>
#include <gdk/gdk.h>
#include <float.h>
#include <math.h>
#include <locale.h>
#include <stdio.h>
#include <pango/pango.h>


#define TYPE_MINES (mines_get_type ())
#define MINES(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MINES, Mines))
#define MINES_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MINES, MinesClass))
#define IS_MINES(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MINES))
#define IS_MINES_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MINES))
#define MINES_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MINES, MinesClass))

typedef struct _Mines Mines;
typedef struct _MinesClass MinesClass;
typedef struct _MinesPrivate MinesPrivate;

#define TYPE_HISTORY (history_get_type ())
#define HISTORY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_HISTORY, History))
#define HISTORY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_HISTORY, HistoryClass))
#define IS_HISTORY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_HISTORY))
#define IS_HISTORY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_HISTORY))
#define HISTORY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_HISTORY, HistoryClass))

typedef struct _History History;
typedef struct _HistoryClass HistoryClass;

#define TYPE_MINEFIELD (minefield_get_type ())
#define MINEFIELD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MINEFIELD, Minefield))
#define MINEFIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MINEFIELD, MinefieldClass))
#define IS_MINEFIELD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MINEFIELD))
#define IS_MINEFIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MINEFIELD))
#define MINEFIELD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MINEFIELD, MinefieldClass))

typedef struct _Minefield Minefield;
typedef struct _MinefieldClass MinefieldClass;

#define TYPE_MINEFIELD_VIEW (minefield_view_get_type ())
#define MINEFIELD_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MINEFIELD_VIEW, MinefieldView))
#define MINEFIELD_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MINEFIELD_VIEW, MinefieldViewClass))
#define IS_MINEFIELD_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MINEFIELD_VIEW))
#define IS_MINEFIELD_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MINEFIELD_VIEW))
#define MINEFIELD_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MINEFIELD_VIEW, MinefieldViewClass))

typedef struct _MinefieldView MinefieldView;
typedef struct _MinefieldViewClass MinefieldViewClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _history_unref0(var) ((var == NULL) ? NULL : (var = (history_unref (var), NULL)))
#define _minefield_unref0(var) ((var == NULL) ? NULL : (var = (minefield_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _MinefieldPrivate MinefieldPrivate;

#define TYPE_HISTORY_ENTRY (history_entry_get_type ())
#define HISTORY_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_HISTORY_ENTRY, HistoryEntry))
#define HISTORY_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_HISTORY_ENTRY, HistoryEntryClass))
#define IS_HISTORY_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_HISTORY_ENTRY))
#define IS_HISTORY_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_HISTORY_ENTRY))
#define HISTORY_ENTRY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_HISTORY_ENTRY, HistoryEntryClass))

typedef struct _HistoryEntry HistoryEntry;
typedef struct _HistoryEntryClass HistoryEntryClass;

#define TYPE_SCORE_DIALOG (score_dialog_get_type ())
#define SCORE_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SCORE_DIALOG, ScoreDialog))
#define SCORE_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SCORE_DIALOG, ScoreDialogClass))
#define IS_SCORE_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SCORE_DIALOG))
#define IS_SCORE_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SCORE_DIALOG))
#define SCORE_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SCORE_DIALOG, ScoreDialogClass))

typedef struct _ScoreDialog ScoreDialog;
typedef struct _ScoreDialogClass ScoreDialogClass;
#define _history_entry_unref0(var) ((var == NULL) ? NULL : (var = (history_entry_unref (var), NULL)))
#define _g_date_time_unref0(var) ((var == NULL) ? NULL : (var = (g_date_time_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _g_option_context_free0(var) ((var == NULL) ? NULL : (var = (g_option_context_free (var), NULL)))
typedef struct _ScoreDialogPrivate ScoreDialogPrivate;
typedef struct _HistoryPrivate HistoryPrivate;

#define TYPE_STAT_ENTRY (stat_entry_get_type ())
#define STAT_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_STAT_ENTRY, StatEntry))
#define STAT_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_STAT_ENTRY, StatEntryClass))
#define IS_STAT_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_STAT_ENTRY))
#define IS_STAT_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_STAT_ENTRY))
#define STAT_ENTRY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_STAT_ENTRY, StatEntryClass))

typedef struct _StatEntry StatEntry;
typedef struct _StatEntryClass StatEntryClass;
typedef struct _StatEntryPrivate StatEntryPrivate;
#define _stat_entry_unref0(var) ((var == NULL) ? NULL : (var = (stat_entry_unref (var), NULL)))
typedef struct _HistoryEntryPrivate HistoryEntryPrivate;
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))

struct _Mines {
	GtkApplication parent_instance;
	MinesPrivate * priv;
};

struct _MinesClass {
	GtkApplicationClass parent_class;
};

struct _MinesPrivate {
	GSettings* settings;
	GtkToolButton* face_button;
	GtkImage* win_face_image;
	GtkImage* sad_face_image;
	GtkImage* smile_face_image;
	GtkImage* cool_face_image;
	GtkImage* worried_face_image;
	GtkToolButton* fullscreen_button;
	GtkToolButton* pause_button;
	GMenu* app_main_menu;
	GtkWindow* window;
	gint window_width;
	gint window_height;
	gboolean is_fullscreen;
	gboolean is_maximized;
	gboolean pause_requested;
	gboolean window_skip_configure;
	History* history;
	Minefield* minefield;
	MinefieldView* minefield_view;
	GtkDialog* pref_dialog;
	GtkLabel* flag_label;
	GtkSpinButton* n_mines_spin;
	GtkLabel* clock_label;
	GSimpleAction* new_game_action;
	GSimpleAction* repeat_size_action;
	GSimpleAction* pause_action;
	GSimpleAction* hint_action;
	GSimpleAction* auto_play_action;
	GtkAspectFrame* new_game_screen;
	GtkAspectFrame* custom_game_screen;
	gboolean is_new_game_screen;
};

struct _Minefield {
	GTypeInstance parent_instance;
	volatile int ref_count;
	MinefieldPrivate * priv;
	guint width;
	guint height;
	guint n_mines;
	gboolean exploded;
};

struct _MinefieldClass {
	GTypeClass parent_class;
	void (*finalize) (Minefield *self);
};

struct _ScoreDialog {
	GtkDialog parent_instance;
	ScoreDialogPrivate * priv;
};

struct _ScoreDialogClass {
	GtkDialogClass parent_class;
};

struct _ScoreDialogPrivate {
	History* history;
	HistoryEntry* selected_entry;
	GtkListStore* size_model;
	GtkListStore* score_model;
	GtkComboBox* size_combo;
	GtkLabel* wins_label;
	GtkLabel* loses_label;
	GtkLabel* total_label;
	GtkLabel* percentage_label;
};

struct _History {
	GTypeInstance parent_instance;
	volatile int ref_count;
	HistoryPrivate * priv;
	gchar* filename;
	gchar* statFileName;
	GList* entries;
	GList* statEntries;
};

struct _HistoryClass {
	GTypeClass parent_class;
	void (*finalize) (History *self);
};

struct _StatEntry {
	GTypeInstance parent_instance;
	volatile int ref_count;
	StatEntryPrivate * priv;
	guint width;
	guint height;
	guint n_mines;
	guint wins;
	guint loses;
};

struct _StatEntryClass {
	GTypeClass parent_class;
	void (*finalize) (StatEntry *self);
};

struct _HistoryEntry {
	GTypeInstance parent_instance;
	volatile int ref_count;
	HistoryEntryPrivate * priv;
	GDateTime* date;
	guint width;
	guint height;
	guint n_mines;
	guint duration;
};

struct _HistoryEntryClass {
	GTypeClass parent_class;
	void (*finalize) (HistoryEntry *self);
};


static gpointer mines_parent_class = NULL;
static gpointer score_dialog_parent_class = NULL;

GType mines_get_type (void) G_GNUC_CONST;
gpointer history_ref (gpointer instance);
void history_unref (gpointer instance);
GParamSpec* param_spec_history (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_history (GValue* value, gpointer v_object);
void value_take_history (GValue* value, gpointer v_object);
gpointer value_get_history (const GValue* value);
GType history_get_type (void) G_GNUC_CONST;
gpointer minefield_ref (gpointer instance);
void minefield_unref (gpointer instance);
GParamSpec* param_spec_minefield (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_minefield (GValue* value, gpointer v_object);
void value_take_minefield (GValue* value, gpointer v_object);
gpointer value_get_minefield (const GValue* value);
GType minefield_get_type (void) G_GNUC_CONST;
GType minefield_view_get_type (void) G_GNUC_CONST;
#define MINES_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_MINES, MinesPrivate))
enum  {
	MINES_DUMMY_PROPERTY
};
#define MINES_KEY_XSIZE "xsize"
#define MINES_XSIZE_MIN 4
#define MINES_XSIZE_MAX 100
#define MINES_KEY_YSIZE "ysize"
#define MINES_YSIZE_MIN 4
#define MINES_YSIZE_MAX 100
#define MINES_KEY_NMINES "nmines"
#define MINES_KEY_MODE "mode"
#define MINES_KEY_USE_QUESTION_MARKS "use-question-marks"
#define MINES_KEY_USE_OVERMINE_WARNING "use-overmine-warning"
#define MINES_KEY_USE_AUTOFLAG "use-autoflag"
#define MINES_KEY_USE_NUMBER_BORDER "use-number-border"
static void mines_new_game_cb (Mines* self);
static void _mines_new_game_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_repeat_size_cb (Mines* self);
static void _mines_repeat_size_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_hint_cb (Mines* self);
static void _mines_hint_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_auto_play_cb (Mines* self);
static void _mines_auto_play_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_toggle_pause_cb (Mines* self);
static void _mines_toggle_pause_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_fullscreen_cb (Mines* self);
static void _mines_fullscreen_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_scores_cb (Mines* self);
static void _mines_scores_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_reset_scores_cb (Mines* self);
static void _mines_reset_scores_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_preferences_cb (Mines* self);
static void _mines_preferences_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_quit_cb (Mines* self);
static void _mines_quit_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_help_cb (Mines* self);
static void _mines_help_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
static void mines_about_cb (Mines* self);
static void _mines_about_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self);
Mines* mines_new (void);
Mines* mines_construct (GType object_type);
static void mines_real_startup (GApplication* base);
static gboolean mines_window_configure_event_cb (Mines* self, GdkEventConfigure* event);
static gboolean _mines_window_configure_event_cb_gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self);
static gboolean mines_window_state_event_cb (Mines* self, GdkEventWindowState* event);
static gboolean _mines_window_state_event_cb_gtk_widget_window_state_event (GtkWidget* _sender, GdkEventWindowState* event, gpointer self);
static gboolean mines_window_focus_out_event_cb (Mines* self, GdkEventFocus* event);
static gboolean _mines_window_focus_out_event_cb_gtk_widget_focus_out_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self);
static gboolean mines_window_focus_in_event_cb (Mines* self, GdkEventFocus* event);
static gboolean _mines_window_focus_in_event_cb_gtk_widget_focus_in_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self);
static GtkImage* mines_load_face_image (Mines* self, const gchar* name);
static void mines_set_face_image (Mines* self, GtkImage* face_image);
MinefieldView* minefield_view_new (void);
MinefieldView* minefield_view_construct (GType object_type);
void minefield_view_set_use_question_marks (MinefieldView* self, gboolean use_question_marks);
void minefield_view_set_use_overmine_warning (MinefieldView* self, gboolean use_overmine_warning);
void minefield_view_set_use_autoflag (MinefieldView* self, gboolean use_autoflag);
void minefield_view_set_use_number_border (MinefieldView* self, gboolean use_number_border);
static gboolean mines_view_button_press_event (Mines* self, GtkWidget* widget, GdkEventButton* event);
static gboolean _mines_view_button_press_event_gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self);
static void mines_look_cb (Mines* self, MinefieldView* minefield_view);
static void _mines_look_cb_minefield_view_look (MinefieldView* _sender, gpointer self);
static void mines_unlook_cb (Mines* self, MinefieldView* minefield_view);
static void _mines_unlook_cb_minefield_view_unlook (MinefieldView* _sender, gpointer self);
static void mines_startup_new_game_screen (Mines* self);
static void mines_startup_custom_game_screen (Mines* self);
static void mines_tick_cb (Mines* self);
History* history_new (const gchar* filename, const gchar* statFileName);
History* history_construct (GType object_type, const gchar* filename, const gchar* statFileName);
void history_load (History* self);
static void mines_small_size_clicked_cb (Mines* self);
static void _mines_small_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static gchar* mines_make_minefield_description (Mines* self, const gchar* color, gint width, gint height, gint n_mines);
static void mines_medium_size_clicked_cb (Mines* self);
static void _mines_medium_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void mines_large_size_clicked_cb (Mines* self);
static void _mines_large_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void mines_show_custom_game_screen (Mines* self);
static void _mines_show_custom_game_screen_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void mines_xsize_spin_cb (Mines* self, GtkSpinButton* spin);
static void _mines_xsize_spin_cb_gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self);
static void mines_ysize_spin_cb (Mines* self, GtkSpinButton* spin);
static void _mines_ysize_spin_cb_gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self);
static void mines_n_mines_spin_cb (Mines* self, GtkSpinButton* spin);
static void _mines_n_mines_spin_cb_gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self);
static void mines_set_n_mines_limit (Mines* self);
static void mines_show_new_game_screen (Mines* self);
static void _mines_show_new_game_screen_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void mines_custom_size_clicked_cb (Mines* self);
static void _mines_custom_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self);
void minefield_set_paused (Minefield* self, gboolean value);
void mines_start (Mines* self);
static void mines_real_shutdown (GApplication* base);
static void mines_real_activate (GApplication* base);
gboolean minefield_get_paused (Minefield* self);
static void mines_update_flag_label (Mines* self);
guint minefield_get_n_flags (Minefield* self);
gpointer history_entry_ref (gpointer instance);
void history_entry_unref (gpointer instance);
GParamSpec* param_spec_history_entry (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_history_entry (GValue* value, gpointer v_object);
void value_take_history_entry (GValue* value, gpointer v_object);
gpointer value_get_history_entry (const GValue* value);
GType history_entry_get_type (void) G_GNUC_CONST;
static gint mines_show_scores (Mines* self, HistoryEntry* selected_entry, gboolean show_quit);
GType score_dialog_get_type (void) G_GNUC_CONST;
ScoreDialog* score_dialog_new (History* history, HistoryEntry* selected_entry, gboolean show_quit);
ScoreDialog* score_dialog_construct (GType object_type, History* history, HistoryEntry* selected_entry, gboolean show_quit);
void history_reset (History* self);
static gboolean mines_can_start_new_game (Mines* self);
guint minefield_get_n_cleared (Minefield* self);
gboolean minefield_get_is_complete (Minefield* self);
static void mines_start_game (Mines* self);
Minefield* minefield_new (guint width, guint height, guint n_mines);
Minefield* minefield_construct (GType object_type, guint width, guint height, guint n_mines);
static void mines_marks_changed_cb (Mines* self, Minefield* minefield);
static void _mines_marks_changed_cb_minefield_marks_changed (Minefield* _sender, gpointer self);
static void mines_explode_cb (Mines* self, Minefield* minefield);
static void _mines_explode_cb_minefield_explode (Minefield* _sender, gpointer self);
static void mines_cleared_cb (Mines* self, Minefield* minefield);
static void _mines_cleared_cb_minefield_cleared (Minefield* _sender, gpointer self);
static void _mines_tick_cb_minefield_tick (Minefield* _sender, gpointer self);
static void mines_paused_changed_cb (Mines* self);
static void _mines_paused_changed_cb_minefield_paused_changed (Minefield* _sender, gpointer self);
void minefield_view_set_minefield (MinefieldView* self, Minefield* value);
void minefield_hint (Minefield* self);
void minefield_auto_play (Minefield* self);
void history_addLose (History* self, guint width, guint height, guint n_mines);
gdouble minefield_get_elapsed (Minefield* self);
HistoryEntry* history_entry_new (GDateTime* date, guint width, guint height, guint n_mines, guint duration);
HistoryEntry* history_entry_construct (GType object_type, GDateTime* date, guint width, guint height, guint n_mines, guint duration);
void history_addWin (History* self, guint width, guint height, guint n_mines);
void history_add (History* self, HistoryEntry* entry);
void history_save (History* self);
static void mines_use_question_toggle_cb (Mines* self, GtkToggleButton* button);
static void mines_use_overmine_toggle_cb (Mines* self, GtkToggleButton* button);
static void mines_use_number_border_toggle_cb (Mines* self, GtkToggleButton* button);
static GtkDialog* mines_create_preferences (Mines* self);
static void mines_pref_response_cb (Mines* self, GtkDialog* dialog, gint response_id);
static void _mines_pref_response_cb_gtk_dialog_response (GtkDialog* _sender, gint response_id, gpointer self);
static gboolean mines_pref_delete_event_cb (Mines* self, GtkWidget* widget, GdkEventAny* event);
static gboolean _mines_pref_delete_event_cb_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self);
static void _mines_use_question_toggle_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self);
static void _mines_use_overmine_toggle_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self);
static void _mines_use_number_border_toggle_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self);
static void mines_set_mode (Mines* self, gint mode);
gint mines_main (gchar** args, int args_length1);
static void mines_finalize (GObject* obj);
#define SCORE_DIALOG_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), TYPE_SCORE_DIALOG, ScoreDialogPrivate))
enum  {
	SCORE_DIALOG_DUMMY_PROPERTY
};
static void score_dialog_entry_added_cb (ScoreDialog* self, HistoryEntry* entry);
static void _score_dialog_entry_added_cb_history_entry_added (History* _sender, HistoryEntry* entry, gpointer self);
static void score_dialog_size_changed_cb (ScoreDialog* self, GtkComboBox* combo);
static void _score_dialog_size_changed_cb_gtk_combo_box_changed (GtkComboBox* _sender, gpointer self);
gpointer stat_entry_ref (gpointer instance);
void stat_entry_unref (gpointer instance);
GParamSpec* param_spec_stat_entry (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_stat_entry (GValue* value, gpointer v_object);
void value_take_stat_entry (GValue* value, gpointer v_object);
gpointer value_get_stat_entry (const GValue* value);
GType stat_entry_get_type (void) G_GNUC_CONST;
StatEntry* history_find_stat (History* self, guint width, guint height, guint n_mines);
void score_dialog_set_size (ScoreDialog* self, guint width, guint height, guint n_mines);
static gint score_dialog_compare_entries (HistoryEntry* a, HistoryEntry* b);
static gint _score_dialog_compare_entries_gcompare_func (gconstpointer a, gconstpointer b);
static void score_dialog_finalize (GObject* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);

static const GActionEntry MINES_action_entries[12] = {{"new-game", _mines_new_game_cb_gsimple_action_activate_callback}, {"repeat-size", _mines_repeat_size_cb_gsimple_action_activate_callback}, {"hint", _mines_hint_cb_gsimple_action_activate_callback}, {"auto_play", _mines_auto_play_cb_gsimple_action_activate_callback}, {"pause", _mines_toggle_pause_cb_gsimple_action_activate_callback}, {"fullscreen", _mines_fullscreen_cb_gsimple_action_activate_callback}, {"scores", _mines_scores_cb_gsimple_action_activate_callback}, {"reset_scores", _mines_reset_scores_cb_gsimple_action_activate_callback}, {"preferences", _mines_preferences_cb_gsimple_action_activate_callback}, {"quit", _mines_quit_cb_gsimple_action_activate_callback}, {"help", _mines_help_cb_gsimple_action_activate_callback}, {"about", _mines_about_cb_gsimple_action_activate_callback}};

static void _mines_new_game_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_new_game_cb (self);
}


static void _mines_repeat_size_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_repeat_size_cb (self);
}


static void _mines_hint_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_hint_cb (self);
}


static void _mines_auto_play_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_auto_play_cb (self);
}


static void _mines_toggle_pause_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_toggle_pause_cb (self);
}


static void _mines_fullscreen_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_fullscreen_cb (self);
}


static void _mines_scores_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_scores_cb (self);
}


static void _mines_reset_scores_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_reset_scores_cb (self);
}


static void _mines_preferences_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_preferences_cb (self);
}


static void _mines_quit_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_quit_cb (self);
}


static void _mines_help_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_help_cb (self);
}


static void _mines_about_cb_gsimple_action_activate_callback (GSimpleAction* action, GVariant* parameter, gpointer self) {
	mines_about_cb (self);
}


Mines* mines_construct (GType object_type) {
	Mines * self = NULL;
	self = (Mines*) g_object_new (object_type, "application-id", "org.gnome.mines", "flags", G_APPLICATION_FLAGS_NONE, NULL);
	return self;
}


Mines* mines_new (void) {
	return mines_construct (TYPE_MINES);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static gboolean _mines_window_configure_event_cb_gtk_widget_configure_event (GtkWidget* _sender, GdkEventConfigure* event, gpointer self) {
	gboolean result;
	result = mines_window_configure_event_cb (self, event);
	return result;
}


static gboolean _mines_window_state_event_cb_gtk_widget_window_state_event (GtkWidget* _sender, GdkEventWindowState* event, gpointer self) {
	gboolean result;
	result = mines_window_state_event_cb (self, event);
	return result;
}


static gboolean _mines_window_focus_out_event_cb_gtk_widget_focus_out_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self) {
	gboolean result;
	result = mines_window_focus_out_event_cb (self, event);
	return result;
}


static gboolean _mines_window_focus_in_event_cb_gtk_widget_focus_in_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self) {
	gboolean result;
	result = mines_window_focus_in_event_cb (self, event);
	return result;
}


static gboolean _mines_view_button_press_event_gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self) {
	gboolean result;
	result = mines_view_button_press_event (self, _sender, event);
	return result;
}


static void _mines_look_cb_minefield_view_look (MinefieldView* _sender, gpointer self) {
	mines_look_cb (self, _sender);
}


static void _mines_unlook_cb_minefield_view_unlook (MinefieldView* _sender, gpointer self) {
	mines_unlook_cb (self, _sender);
}


static void mines_real_startup (GApplication* base) {
	Mines * self;
	const gchar* _tmp0_ = NULL;
	GSettings* _tmp1_ = NULL;
	GAction* _tmp2_ = NULL;
	GSimpleAction* _tmp3_ = NULL;
	GSimpleAction* _tmp4_ = NULL;
	GAction* _tmp5_ = NULL;
	GSimpleAction* _tmp6_ = NULL;
	GSimpleAction* _tmp7_ = NULL;
	GAction* _tmp8_ = NULL;
	GSimpleAction* _tmp9_ = NULL;
	GSimpleAction* _tmp10_ = NULL;
	GAction* _tmp11_ = NULL;
	GSimpleAction* _tmp12_ = NULL;
	GSimpleAction* _tmp13_ = NULL;
	GAction* _tmp14_ = NULL;
	GSimpleAction* _tmp15_ = NULL;
	GSimpleAction* _tmp16_ = NULL;
	GMenu* menu = NULL;
	GMenu* _tmp17_ = NULL;
	GMenu* _tmp18_ = NULL;
	GMenu* _tmp19_ = NULL;
	GMenu* _tmp20_ = NULL;
	GMenu* _tmp21_ = NULL;
	const gchar* _tmp22_ = NULL;
	GMenu* _tmp23_ = NULL;
	const gchar* _tmp24_ = NULL;
	GMenu* _tmp25_ = NULL;
	const gchar* _tmp26_ = NULL;
	GMenu* _tmp27_ = NULL;
	const gchar* _tmp28_ = NULL;
	GMenu* _tmp29_ = NULL;
	const gchar* _tmp30_ = NULL;
	GMenu* _tmp31_ = NULL;
	const gchar* _tmp32_ = NULL;
	GMenu* _tmp33_ = NULL;
	const gchar* _tmp34_ = NULL;
	GMenu* section = NULL;
	GMenu* _tmp35_ = NULL;
	GMenu* _tmp36_ = NULL;
	GMenu* _tmp37_ = NULL;
	GMenu* _tmp38_ = NULL;
	const gchar* _tmp39_ = NULL;
	GMenu* _tmp40_ = NULL;
	const gchar* _tmp41_ = NULL;
	GMenu* _tmp42_ = NULL;
	GMenu* _tmp43_ = NULL;
	GMenu* _tmp44_ = NULL;
	GMenu* _tmp45_ = NULL;
	const gchar* _tmp46_ = NULL;
	GMenu* _tmp47_ = NULL;
	GtkApplicationWindow* _tmp48_ = NULL;
	GtkWindow* _tmp49_ = NULL;
	const gchar* _tmp50_ = NULL;
	GtkWindow* _tmp51_ = NULL;
	GtkWindow* _tmp52_ = NULL;
	GtkWindow* _tmp53_ = NULL;
	GtkWindow* _tmp54_ = NULL;
	GtkWindow* _tmp55_ = NULL;
	GSettings* _tmp56_ = NULL;
	gint _tmp57_ = 0;
	GSettings* _tmp58_ = NULL;
	gint _tmp59_ = 0;
	GSettings* _tmp60_ = NULL;
	gboolean _tmp61_ = FALSE;
	GtkWindow* _tmp66_ = NULL;
	GtkBox* main_vbox = NULL;
	GtkBox* _tmp67_ = NULL;
	GtkWindow* _tmp68_ = NULL;
	GtkBox* status_box = NULL;
	GtkBox* _tmp69_ = NULL;
	GtkLabel* _tmp70_ = NULL;
	GtkLabel* _tmp71_ = NULL;
	GtkLabel* _tmp72_ = NULL;
	GtkLabel* _tmp73_ = NULL;
	GtkLabel* _tmp74_ = NULL;
	GtkLabel* _tmp75_ = NULL;
	GtkImage* _tmp76_ = NULL;
	GtkImage* _tmp77_ = NULL;
	GtkImage* _tmp78_ = NULL;
	GtkImage* _tmp79_ = NULL;
	GtkImage* _tmp80_ = NULL;
	GtkToolbar* toolbar = NULL;
	GtkToolbar* _tmp81_ = NULL;
	GtkStyleContext* _tmp82_ = NULL;
	const gchar* _tmp83_ = NULL;
	GtkToolButton* _tmp84_ = NULL;
	GtkToolButton* _tmp85_ = NULL;
	GtkToolButton* _tmp86_ = NULL;
	GtkToolButton* _tmp87_ = NULL;
	GtkToolButton* _tmp88_ = NULL;
	GtkImage* _tmp89_ = NULL;
	GtkToolButton* _tmp90_ = NULL;
	GtkToolButton* _tmp91_ = NULL;
	GtkToolButton* hint_button = NULL;
	const gchar* _tmp92_ = NULL;
	GtkToolButton* _tmp93_ = NULL;
	GtkToolButton* auto_play_button = NULL;
	const gchar* _tmp94_ = NULL;
	GtkToolButton* _tmp95_ = NULL;
	const gchar* _tmp96_ = NULL;
	GtkToolButton* _tmp97_ = NULL;
	GtkToolButton* _tmp98_ = NULL;
	GtkToolButton* _tmp99_ = NULL;
	GtkToolButton* _tmp100_ = NULL;
	GtkToolButton* _tmp101_ = NULL;
	GtkToolButton* _tmp102_ = NULL;
	const gchar* _tmp103_ = NULL;
	GtkToolButton* _tmp104_ = NULL;
	GtkToolButton* _tmp105_ = NULL;
	GtkToolButton* _tmp106_ = NULL;
	GtkToolButton* _tmp107_ = NULL;
	GtkToolButton* _tmp108_ = NULL;
	GtkToolButton* _tmp109_ = NULL;
	GtkAlignment* status_alignment = NULL;
	GtkAlignment* _tmp110_ = NULL;
	GtkToolItem* status_item = NULL;
	GtkToolItem* _tmp111_ = NULL;
	GtkBox* view_box = NULL;
	GtkBox* _tmp112_ = NULL;
	MinefieldView* _tmp113_ = NULL;
	MinefieldView* _tmp114_ = NULL;
	GSettings* _tmp115_ = NULL;
	gboolean _tmp116_ = FALSE;
	MinefieldView* _tmp117_ = NULL;
	GSettings* _tmp118_ = NULL;
	gboolean _tmp119_ = FALSE;
	MinefieldView* _tmp120_ = NULL;
	GSettings* _tmp121_ = NULL;
	gboolean _tmp122_ = FALSE;
	MinefieldView* _tmp123_ = NULL;
	GSettings* _tmp124_ = NULL;
	gboolean _tmp125_ = FALSE;
	MinefieldView* _tmp126_ = NULL;
	MinefieldView* _tmp127_ = NULL;
	MinefieldView* _tmp128_ = NULL;
	MinefieldView* _tmp129_ = NULL;
	GtkAspectFrame* _tmp130_ = NULL;
	GtkAspectFrame* _tmp131_ = NULL;
	const gchar* _tmp132_ = NULL;
	gchar* _tmp133_ = NULL;
	gchar* _tmp134_ = NULL;
	const gchar* _tmp135_ = NULL;
	gchar* _tmp136_ = NULL;
	gchar* _tmp137_ = NULL;
	History* _tmp138_ = NULL;
	History* _tmp139_ = NULL;
	self = (Mines*) base;
	G_APPLICATION_CLASS (mines_parent_class)->startup ((GApplication*) G_TYPE_CHECK_INSTANCE_CAST (self, GTK_TYPE_APPLICATION, GtkApplication));
	_tmp0_ = _ ("Mines");
	g_set_application_name (_tmp0_);
	_tmp1_ = g_settings_new ("org.gnome.mines");
	_g_object_unref0 (self->priv->settings);
	self->priv->settings = _tmp1_;
	gtk_window_set_default_icon_name ("gnome-mines");
	g_action_map_add_action_entries ((GActionMap*) self, MINES_action_entries, G_N_ELEMENTS (MINES_action_entries), self);
	_tmp2_ = g_action_map_lookup_action ((GActionMap*) self, "new-game");
	_tmp3_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp2_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp2_) : NULL);
	_g_object_unref0 (self->priv->new_game_action);
	self->priv->new_game_action = _tmp3_;
	_tmp4_ = self->priv->new_game_action;
	g_simple_action_set_enabled (_tmp4_, FALSE);
	_tmp5_ = g_action_map_lookup_action ((GActionMap*) self, "repeat-size");
	_tmp6_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp5_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp5_) : NULL);
	_g_object_unref0 (self->priv->repeat_size_action);
	self->priv->repeat_size_action = _tmp6_;
	_tmp7_ = self->priv->repeat_size_action;
	g_simple_action_set_enabled (_tmp7_, FALSE);
	_tmp8_ = g_action_map_lookup_action ((GActionMap*) self, "hint");
	_tmp9_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp8_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp8_) : NULL);
	_g_object_unref0 (self->priv->hint_action);
	self->priv->hint_action = _tmp9_;
	_tmp10_ = self->priv->hint_action;
	g_simple_action_set_enabled (_tmp10_, FALSE);
	_tmp11_ = g_action_map_lookup_action ((GActionMap*) self, "auto_play");
	_tmp12_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp11_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp11_) : NULL);
	_g_object_unref0 (self->priv->auto_play_action);
	self->priv->auto_play_action = _tmp12_;
	_tmp13_ = self->priv->auto_play_action;
	g_simple_action_set_enabled (_tmp13_, FALSE);
	_tmp14_ = g_action_map_lookup_action ((GActionMap*) self, "pause");
	_tmp15_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp14_, g_simple_action_get_type ()) ? ((GSimpleAction*) _tmp14_) : NULL);
	_g_object_unref0 (self->priv->pause_action);
	self->priv->pause_action = _tmp15_;
	_tmp16_ = self->priv->pause_action;
	g_simple_action_set_enabled (_tmp16_, FALSE);
	_tmp17_ = g_menu_new ();
	menu = _tmp17_;
	_tmp18_ = g_menu_new ();
	_g_object_unref0 (self->priv->app_main_menu);
	self->priv->app_main_menu = _tmp18_;
	_tmp19_ = menu;
	_tmp20_ = self->priv->app_main_menu;
	g_menu_append_section (_tmp19_, NULL, (GMenuModel*) _tmp20_);
	_tmp21_ = self->priv->app_main_menu;
	_tmp22_ = _ ("_New Game");
	g_menu_append (_tmp21_, _tmp22_, "app.new-game");
	_tmp23_ = self->priv->app_main_menu;
	_tmp24_ = _ ("_Replay Size");
	g_menu_append (_tmp23_, _tmp24_, "app.repeat-size");
	_tmp25_ = self->priv->app_main_menu;
	_tmp26_ = _ ("_Pause");
	g_menu_append (_tmp25_, _tmp26_, "app.pause");
	_tmp27_ = self->priv->app_main_menu;
	_tmp28_ = _ ("_Fullscreen");
	g_menu_append (_tmp27_, _tmp28_, "app.fullscreen");
	_tmp29_ = self->priv->app_main_menu;
	_tmp30_ = _ ("_Scores");
	g_menu_append (_tmp29_, _tmp30_, "app.scores");
	_tmp31_ = self->priv->app_main_menu;
	_tmp32_ = _ ("_Reset Scores");
	g_menu_append (_tmp31_, _tmp32_, "app.reset_scores");
	_tmp33_ = self->priv->app_main_menu;
	_tmp34_ = _ ("_Preferences");
	g_menu_append (_tmp33_, _tmp34_, "app.preferences");
	_tmp35_ = g_menu_new ();
	section = _tmp35_;
	_tmp36_ = menu;
	_tmp37_ = section;
	g_menu_append_section (_tmp36_, NULL, (GMenuModel*) _tmp37_);
	_tmp38_ = section;
	_tmp39_ = _ ("_Help");
	g_menu_append (_tmp38_, _tmp39_, "app.help");
	_tmp40_ = section;
	_tmp41_ = _ ("_About");
	g_menu_append (_tmp40_, _tmp41_, "app.about");
	_tmp42_ = g_menu_new ();
	_g_object_unref0 (section);
	section = _tmp42_;
	_tmp43_ = menu;
	_tmp44_ = section;
	g_menu_append_section (_tmp43_, NULL, (GMenuModel*) _tmp44_);
	_tmp45_ = section;
	_tmp46_ = _ ("_Quit");
	g_menu_append (_tmp45_, _tmp46_, "app.quit");
	_tmp47_ = menu;
	gtk_application_set_app_menu ((GtkApplication*) self, (GMenuModel*) _tmp47_);
	gtk_application_add_accelerator ((GtkApplication*) self, "<Primary>n", "app.new-game", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "<Primary>r", "app.repeat-size", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "Pause", "app.pause", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "F11", "app.fullscreen", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "F1", "app.help", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "<Primary>w", "app.quit", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "<Primary>q", "app.quit", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "a", "app.auto_play", NULL);
	gtk_application_add_accelerator ((GtkApplication*) self, "A", "app.auto_play", NULL);
	_tmp48_ = (GtkApplicationWindow*) gtk_application_window_new ((GtkApplication*) self);
	g_object_ref_sink (_tmp48_);
	_g_object_unref0 (self->priv->window);
	self->priv->window = (GtkWindow*) _tmp48_;
	_tmp49_ = self->priv->window;
	_tmp50_ = _ ("Mines");
	gtk_window_set_title (_tmp49_, _tmp50_);
	_tmp51_ = self->priv->window;
	g_signal_connect_object ((GtkWidget*) _tmp51_, "configure-event", (GCallback) _mines_window_configure_event_cb_gtk_widget_configure_event, self, 0);
	_tmp52_ = self->priv->window;
	g_signal_connect_object ((GtkWidget*) _tmp52_, "window-state-event", (GCallback) _mines_window_state_event_cb_gtk_widget_window_state_event, self, 0);
	_tmp53_ = self->priv->window;
	g_signal_connect_object ((GtkWidget*) _tmp53_, "focus-out-event", (GCallback) _mines_window_focus_out_event_cb_gtk_widget_focus_out_event, self, 0);
	_tmp54_ = self->priv->window;
	g_signal_connect_object ((GtkWidget*) _tmp54_, "focus-in-event", (GCallback) _mines_window_focus_in_event_cb_gtk_widget_focus_in_event, self, 0);
	_tmp55_ = self->priv->window;
	_tmp56_ = self->priv->settings;
	_tmp57_ = g_settings_get_int (_tmp56_, "window-width");
	_tmp58_ = self->priv->settings;
	_tmp59_ = g_settings_get_int (_tmp58_, "window-height");
	gtk_window_set_default_size (_tmp55_, _tmp57_, _tmp59_);
	_tmp60_ = self->priv->settings;
	_tmp61_ = g_settings_get_boolean (_tmp60_, "window-is-fullscreen");
	if (_tmp61_) {
		GtkWindow* _tmp62_ = NULL;
		_tmp62_ = self->priv->window;
		gtk_window_fullscreen (_tmp62_);
	} else {
		GSettings* _tmp63_ = NULL;
		gboolean _tmp64_ = FALSE;
		_tmp63_ = self->priv->settings;
		_tmp64_ = g_settings_get_boolean (_tmp63_, "window-is-maximized");
		if (_tmp64_) {
			GtkWindow* _tmp65_ = NULL;
			_tmp65_ = self->priv->window;
			gtk_window_maximize (_tmp65_);
		}
	}
	_tmp66_ = self->priv->window;
	gtk_application_add_window ((GtkApplication*) self, _tmp66_);
	_tmp67_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp67_);
	main_vbox = _tmp67_;
	_tmp68_ = self->priv->window;
	gtk_container_add ((GtkContainer*) _tmp68_, (GtkWidget*) main_vbox);
	gtk_widget_show ((GtkWidget*) main_vbox);
	_tmp69_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 10);
	g_object_ref_sink (_tmp69_);
	status_box = _tmp69_;
	gtk_widget_show ((GtkWidget*) status_box);
	_tmp70_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp70_);
	_g_object_unref0 (self->priv->flag_label);
	self->priv->flag_label = _tmp70_;
	_tmp71_ = self->priv->flag_label;
	gtk_widget_show ((GtkWidget*) _tmp71_);
	_tmp72_ = self->priv->flag_label;
	gtk_box_pack_start (status_box, (GtkWidget*) _tmp72_, FALSE, FALSE, (guint) 0);
	_tmp73_ = (GtkLabel*) gtk_label_new ("");
	g_object_ref_sink (_tmp73_);
	_g_object_unref0 (self->priv->clock_label);
	self->priv->clock_label = _tmp73_;
	_tmp74_ = self->priv->clock_label;
	gtk_widget_show ((GtkWidget*) _tmp74_);
	_tmp75_ = self->priv->clock_label;
	gtk_box_pack_start (status_box, (GtkWidget*) _tmp75_, FALSE, FALSE, (guint) 0);
	_tmp76_ = mines_load_face_image (self, "face-win.svg");
	_g_object_unref0 (self->priv->win_face_image);
	self->priv->win_face_image = _tmp76_;
	_tmp77_ = mines_load_face_image (self, "face-sad.svg");
	_g_object_unref0 (self->priv->sad_face_image);
	self->priv->sad_face_image = _tmp77_;
	_tmp78_ = mines_load_face_image (self, "face-smile.svg");
	_g_object_unref0 (self->priv->smile_face_image);
	self->priv->smile_face_image = _tmp78_;
	_tmp79_ = mines_load_face_image (self, "face-cool.svg");
	_g_object_unref0 (self->priv->cool_face_image);
	self->priv->cool_face_image = _tmp79_;
	_tmp80_ = mines_load_face_image (self, "face-worried.svg");
	_g_object_unref0 (self->priv->worried_face_image);
	self->priv->worried_face_image = _tmp80_;
	_tmp81_ = (GtkToolbar*) gtk_toolbar_new ();
	g_object_ref_sink (_tmp81_);
	toolbar = _tmp81_;
	gtk_widget_show ((GtkWidget*) toolbar);
	gtk_toolbar_set_show_arrow (toolbar, FALSE);
	_tmp82_ = gtk_widget_get_style_context ((GtkWidget*) toolbar);
	gtk_style_context_add_class (_tmp82_, GTK_STYLE_CLASS_PRIMARY_TOOLBAR);
	_tmp83_ = _ ("_New");
	_tmp84_ = (GtkToolButton*) gtk_tool_button_new (NULL, _tmp83_);
	g_object_ref_sink (_tmp84_);
	_g_object_unref0 (self->priv->face_button);
	self->priv->face_button = _tmp84_;
	_tmp85_ = self->priv->face_button;
	gtk_tool_button_set_use_underline (_tmp85_, TRUE);
	_tmp86_ = self->priv->face_button;
	gtk_tool_button_set_icon_name (_tmp86_, "document-new");
	_tmp87_ = self->priv->face_button;
	gtk_actionable_set_action_name ((GtkActionable*) _tmp87_, "app.new-game");
	_tmp88_ = self->priv->face_button;
	gtk_tool_item_set_is_important ((GtkToolItem*) _tmp88_, TRUE);
	_tmp89_ = self->priv->smile_face_image;
	mines_set_face_image (self, _tmp89_);
	_tmp90_ = self->priv->face_button;
	gtk_widget_show ((GtkWidget*) _tmp90_);
	_tmp91_ = self->priv->face_button;
	gtk_toolbar_insert (toolbar, (GtkToolItem*) _tmp91_, -1);
	_tmp92_ = _ ("Hint");
	_tmp93_ = (GtkToolButton*) gtk_tool_button_new (NULL, _tmp92_);
	g_object_ref_sink (_tmp93_);
	hint_button = _tmp93_;
	gtk_tool_button_set_use_underline (hint_button, TRUE);
	gtk_tool_button_set_icon_name (hint_button, "dialog-information");
	gtk_actionable_set_action_name ((GtkActionable*) hint_button, "app.hint");
	gtk_tool_item_set_is_important ((GtkToolItem*) hint_button, TRUE);
	gtk_widget_show ((GtkWidget*) hint_button);
	gtk_toolbar_insert (toolbar, (GtkToolItem*) hint_button, -1);
	_tmp94_ = _ ("Auto play");
	_tmp95_ = (GtkToolButton*) gtk_tool_button_new (NULL, _tmp94_);
	g_object_ref_sink (_tmp95_);
	auto_play_button = _tmp95_;
	gtk_tool_button_set_use_underline (auto_play_button, TRUE);
	gtk_tool_button_set_icon_name (auto_play_button, "media-playback-start");
	gtk_actionable_set_action_name ((GtkActionable*) auto_play_button, "app.auto_play");
	gtk_tool_item_set_is_important ((GtkToolItem*) auto_play_button, TRUE);
	gtk_widget_show ((GtkWidget*) auto_play_button);
	gtk_toolbar_insert (toolbar, (GtkToolItem*) auto_play_button, -1);
	_tmp96_ = _ ("_Pause");
	_tmp97_ = (GtkToolButton*) gtk_tool_button_new (NULL, _tmp96_);
	g_object_ref_sink (_tmp97_);
	_g_object_unref0 (self->priv->pause_button);
	self->priv->pause_button = _tmp97_;
	_tmp98_ = self->priv->pause_button;
	gtk_tool_button_set_icon_name (_tmp98_, "media-playback-pause");
	_tmp99_ = self->priv->pause_button;
	gtk_tool_button_set_use_underline (_tmp99_, TRUE);
	_tmp100_ = self->priv->pause_button;
	gtk_actionable_set_action_name ((GtkActionable*) _tmp100_, "app.pause");
	_tmp101_ = self->priv->pause_button;
	gtk_widget_show ((GtkWidget*) _tmp101_);
	_tmp102_ = self->priv->pause_button;
	gtk_toolbar_insert (toolbar, (GtkToolItem*) _tmp102_, -1);
	_tmp103_ = _ ("_Fullscreen");
	_tmp104_ = (GtkToolButton*) gtk_tool_button_new (NULL, _tmp103_);
	g_object_ref_sink (_tmp104_);
	_g_object_unref0 (self->priv->fullscreen_button);
	self->priv->fullscreen_button = _tmp104_;
	_tmp105_ = self->priv->fullscreen_button;
	gtk_tool_button_set_icon_name (_tmp105_, "view-fullscreen");
	_tmp106_ = self->priv->fullscreen_button;
	gtk_tool_button_set_use_underline (_tmp106_, TRUE);
	_tmp107_ = self->priv->fullscreen_button;
	gtk_actionable_set_action_name ((GtkActionable*) _tmp107_, "app.fullscreen");
	_tmp108_ = self->priv->fullscreen_button;
	gtk_widget_show ((GtkWidget*) _tmp108_);
	_tmp109_ = self->priv->fullscreen_button;
	gtk_toolbar_insert (toolbar, (GtkToolItem*) _tmp109_, -1);
	_tmp110_ = (GtkAlignment*) gtk_alignment_new (1.0f, 0.5f, 0.0f, 0.0f);
	g_object_ref_sink (_tmp110_);
	status_alignment = _tmp110_;
	gtk_container_add ((GtkContainer*) status_alignment, (GtkWidget*) status_box);
	gtk_widget_show ((GtkWidget*) status_alignment);
	_tmp111_ = gtk_tool_item_new ();
	g_object_ref_sink (_tmp111_);
	status_item = _tmp111_;
	gtk_tool_item_set_expand (status_item, TRUE);
	gtk_container_add ((GtkContainer*) status_item, (GtkWidget*) status_alignment);
	gtk_widget_show ((GtkWidget*) status_item);
	gtk_toolbar_insert (toolbar, status_item, -1);
	gtk_box_pack_start (main_vbox, (GtkWidget*) toolbar, FALSE, FALSE, (guint) 0);
	_tmp112_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp112_);
	view_box = _tmp112_;
	gtk_container_set_border_width ((GtkContainer*) view_box, (guint) 3);
	gtk_widget_show ((GtkWidget*) view_box);
	gtk_box_pack_start (main_vbox, (GtkWidget*) view_box, TRUE, TRUE, (guint) 0);
	_tmp113_ = minefield_view_new ();
	g_object_ref_sink (_tmp113_);
	_g_object_unref0 (self->priv->minefield_view);
	self->priv->minefield_view = _tmp113_;
	_tmp114_ = self->priv->minefield_view;
	_tmp115_ = self->priv->settings;
	_tmp116_ = g_settings_get_boolean (_tmp115_, MINES_KEY_USE_QUESTION_MARKS);
	minefield_view_set_use_question_marks (_tmp114_, _tmp116_);
	_tmp117_ = self->priv->minefield_view;
	_tmp118_ = self->priv->settings;
	_tmp119_ = g_settings_get_boolean (_tmp118_, MINES_KEY_USE_OVERMINE_WARNING);
	minefield_view_set_use_overmine_warning (_tmp117_, _tmp119_);
	_tmp120_ = self->priv->minefield_view;
	_tmp121_ = self->priv->settings;
	_tmp122_ = g_settings_get_boolean (_tmp121_, MINES_KEY_USE_AUTOFLAG);
	minefield_view_set_use_autoflag (_tmp120_, _tmp122_);
	_tmp123_ = self->priv->minefield_view;
	_tmp124_ = self->priv->settings;
	_tmp125_ = g_settings_get_boolean (_tmp124_, MINES_KEY_USE_NUMBER_BORDER);
	minefield_view_set_use_number_border (_tmp123_, _tmp125_);
	_tmp126_ = self->priv->minefield_view;
	g_signal_connect_object ((GtkWidget*) _tmp126_, "button-press-event", (GCallback) _mines_view_button_press_event_gtk_widget_button_press_event, self, 0);
	_tmp127_ = self->priv->minefield_view;
	g_signal_connect_object (_tmp127_, "look", (GCallback) _mines_look_cb_minefield_view_look, self, 0);
	_tmp128_ = self->priv->minefield_view;
	g_signal_connect_object (_tmp128_, "unlook", (GCallback) _mines_unlook_cb_minefield_view_unlook, self, 0);
	_tmp129_ = self->priv->minefield_view;
	gtk_box_pack_start (view_box, (GtkWidget*) _tmp129_, TRUE, TRUE, (guint) 0);
	mines_startup_new_game_screen (self);
	_tmp130_ = self->priv->new_game_screen;
	gtk_box_pack_start (view_box, (GtkWidget*) _tmp130_, TRUE, TRUE, (guint) 0);
	mines_startup_custom_game_screen (self);
	_tmp131_ = self->priv->custom_game_screen;
	gtk_box_pack_start (view_box, (GtkWidget*) _tmp131_, TRUE, FALSE, (guint) 0);
	mines_tick_cb (self);
	_tmp132_ = g_get_user_data_dir ();
	_tmp133_ = g_build_filename (_tmp132_, "gnome-mines", "history", NULL);
	_tmp134_ = _tmp133_;
	_tmp135_ = g_get_user_data_dir ();
	_tmp136_ = g_build_filename (_tmp135_, "gnome-mines", "stat", NULL);
	_tmp137_ = _tmp136_;
	_tmp138_ = history_new (_tmp134_, _tmp137_);
	_history_unref0 (self->priv->history);
	self->priv->history = _tmp138_;
	_g_free0 (_tmp137_);
	_g_free0 (_tmp134_);
	_tmp139_ = self->priv->history;
	history_load (_tmp139_);
	_g_object_unref0 (view_box);
	_g_object_unref0 (status_item);
	_g_object_unref0 (status_alignment);
	_g_object_unref0 (auto_play_button);
	_g_object_unref0 (hint_button);
	_g_object_unref0 (toolbar);
	_g_object_unref0 (status_box);
	_g_object_unref0 (main_vbox);
	_g_object_unref0 (section);
	_g_object_unref0 (menu);
}


static void _mines_small_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	mines_small_size_clicked_cb (self);
}


static void _mines_medium_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	mines_medium_size_clicked_cb (self);
}


static void _mines_large_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	mines_large_size_clicked_cb (self);
}


static void _mines_show_custom_game_screen_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	mines_show_custom_game_screen (self);
}


static void mines_startup_new_game_screen (Mines* self) {
	const gchar* _tmp0_ = NULL;
	GtkAspectFrame* _tmp1_ = NULL;
	GtkAspectFrame* _tmp2_ = NULL;
	GtkAspectFrame* _tmp3_ = NULL;
	GtkGrid* new_game_grid = NULL;
	GtkGrid* _tmp4_ = NULL;
	GtkAspectFrame* _tmp5_ = NULL;
	GtkButton* button = NULL;
	GtkButton* _tmp6_ = NULL;
	GtkButton* _tmp7_ = NULL;
	GtkButton* _tmp8_ = NULL;
	GtkLabel* label = NULL;
	GtkLabel* _tmp9_ = NULL;
	GtkLabel* _tmp10_ = NULL;
	gchar* _tmp11_ = NULL;
	gchar* _tmp12_ = NULL;
	GtkLabel* _tmp13_ = NULL;
	GtkButton* _tmp14_ = NULL;
	GtkLabel* _tmp15_ = NULL;
	GtkButton* _tmp16_ = NULL;
	GtkButton* _tmp17_ = NULL;
	GtkButton* _tmp18_ = NULL;
	GtkLabel* _tmp19_ = NULL;
	GtkLabel* _tmp20_ = NULL;
	gchar* _tmp21_ = NULL;
	gchar* _tmp22_ = NULL;
	GtkLabel* _tmp23_ = NULL;
	GtkButton* _tmp24_ = NULL;
	GtkLabel* _tmp25_ = NULL;
	GtkButton* _tmp26_ = NULL;
	GtkButton* _tmp27_ = NULL;
	GtkButton* _tmp28_ = NULL;
	GtkLabel* _tmp29_ = NULL;
	GtkLabel* _tmp30_ = NULL;
	gchar* _tmp31_ = NULL;
	gchar* _tmp32_ = NULL;
	GtkLabel* _tmp33_ = NULL;
	GtkButton* _tmp34_ = NULL;
	GtkLabel* _tmp35_ = NULL;
	GtkButton* _tmp36_ = NULL;
	GtkButton* _tmp37_ = NULL;
	GtkButton* _tmp38_ = NULL;
	GtkLabel* _tmp39_ = NULL;
	GtkLabel* _tmp40_ = NULL;
	const gchar* _tmp41_ = NULL;
	const gchar* _tmp42_ = NULL;
	gchar* _tmp43_ = NULL;
	gchar* _tmp44_ = NULL;
	gchar* _tmp45_ = NULL;
	gchar* _tmp46_ = NULL;
	GtkLabel* _tmp47_ = NULL;
	GtkButton* _tmp48_ = NULL;
	GtkLabel* _tmp49_ = NULL;
	GtkAspectFrame* _tmp50_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = _ ("Field Size");
	_tmp1_ = (GtkAspectFrame*) gtk_aspect_frame_new (_tmp0_, 0.5f, 0.5f, 1.0f, FALSE);
	g_object_ref_sink (_tmp1_);
	_g_object_unref0 (self->priv->new_game_screen);
	self->priv->new_game_screen = _tmp1_;
	_tmp2_ = self->priv->new_game_screen;
	gtk_frame_set_shadow_type ((GtkFrame*) _tmp2_, GTK_SHADOW_NONE);
	_tmp3_ = self->priv->new_game_screen;
	gtk_widget_set_size_request ((GtkWidget*) _tmp3_, 200, 200);
	_tmp4_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp4_);
	new_game_grid = _tmp4_;
	gtk_grid_set_column_homogeneous (new_game_grid, TRUE);
	gtk_grid_set_column_spacing (new_game_grid, 0);
	gtk_grid_set_row_homogeneous (new_game_grid, TRUE);
	gtk_grid_set_row_spacing (new_game_grid, 0);
	_tmp5_ = self->priv->new_game_screen;
	gtk_container_add ((GtkContainer*) _tmp5_, (GtkWidget*) new_game_grid);
	_tmp6_ = (GtkButton*) gtk_button_new ();
	g_object_ref_sink (_tmp6_);
	button = _tmp6_;
	_tmp7_ = button;
	g_signal_connect_object (_tmp7_, "clicked", (GCallback) _mines_small_size_clicked_cb_gtk_button_clicked, self, 0);
	_tmp8_ = button;
	gtk_grid_attach (new_game_grid, (GtkWidget*) _tmp8_, 0, 0, 1, 1);
	_tmp9_ = (GtkLabel*) gtk_label_new (NULL);
	g_object_ref_sink (_tmp9_);
	label = _tmp9_;
	_tmp10_ = label;
	_tmp11_ = mines_make_minefield_description (self, "#0000ff", 8, 8, 10);
	_tmp12_ = _tmp11_;
	gtk_label_set_markup (_tmp10_, _tmp12_);
	_g_free0 (_tmp12_);
	_tmp13_ = label;
	gtk_label_set_justify (_tmp13_, GTK_JUSTIFY_CENTER);
	_tmp14_ = button;
	_tmp15_ = label;
	gtk_container_add ((GtkContainer*) _tmp14_, (GtkWidget*) _tmp15_);
	_tmp16_ = (GtkButton*) gtk_button_new ();
	g_object_ref_sink (_tmp16_);
	_g_object_unref0 (button);
	button = _tmp16_;
	_tmp17_ = button;
	g_signal_connect_object (_tmp17_, "clicked", (GCallback) _mines_medium_size_clicked_cb_gtk_button_clicked, self, 0);
	_tmp18_ = button;
	gtk_grid_attach (new_game_grid, (GtkWidget*) _tmp18_, 1, 0, 1, 1);
	_tmp19_ = (GtkLabel*) gtk_label_new (NULL);
	g_object_ref_sink (_tmp19_);
	_g_object_unref0 (label);
	label = _tmp19_;
	_tmp20_ = label;
	_tmp21_ = mines_make_minefield_description (self, "#00a000", 16, 16, 40);
	_tmp22_ = _tmp21_;
	gtk_label_set_markup (_tmp20_, _tmp22_);
	_g_free0 (_tmp22_);
	_tmp23_ = label;
	gtk_label_set_justify (_tmp23_, GTK_JUSTIFY_CENTER);
	_tmp24_ = button;
	_tmp25_ = label;
	gtk_container_add ((GtkContainer*) _tmp24_, (GtkWidget*) _tmp25_);
	_tmp26_ = (GtkButton*) gtk_button_new ();
	g_object_ref_sink (_tmp26_);
	_g_object_unref0 (button);
	button = _tmp26_;
	_tmp27_ = button;
	g_signal_connect_object (_tmp27_, "clicked", (GCallback) _mines_large_size_clicked_cb_gtk_button_clicked, self, 0);
	_tmp28_ = button;
	gtk_grid_attach (new_game_grid, (GtkWidget*) _tmp28_, 0, 1, 1, 1);
	_tmp29_ = (GtkLabel*) gtk_label_new (NULL);
	g_object_ref_sink (_tmp29_);
	_g_object_unref0 (label);
	label = _tmp29_;
	_tmp30_ = label;
	_tmp31_ = mines_make_minefield_description (self, "#ff0000", 30, 16, 99);
	_tmp32_ = _tmp31_;
	gtk_label_set_markup (_tmp30_, _tmp32_);
	_g_free0 (_tmp32_);
	_tmp33_ = label;
	gtk_label_set_justify (_tmp33_, GTK_JUSTIFY_CENTER);
	_tmp34_ = button;
	_tmp35_ = label;
	gtk_container_add ((GtkContainer*) _tmp34_, (GtkWidget*) _tmp35_);
	_tmp36_ = (GtkButton*) gtk_button_new ();
	g_object_ref_sink (_tmp36_);
	_g_object_unref0 (button);
	button = _tmp36_;
	_tmp37_ = button;
	g_signal_connect_object (_tmp37_, "clicked", (GCallback) _mines_show_custom_game_screen_gtk_button_clicked, self, 0);
	_tmp38_ = button;
	gtk_grid_attach (new_game_grid, (GtkWidget*) _tmp38_, 1, 1, 1, 1);
	_tmp39_ = (GtkLabel*) gtk_label_new (NULL);
	g_object_ref_sink (_tmp39_);
	_g_object_unref0 (label);
	label = _tmp39_;
	_tmp40_ = label;
	_tmp41_ = _ ("Custom");
	_tmp42_ = g_dpgettext2 (NULL, "board size", _tmp41_);
	_tmp43_ = g_strconcat ("<span fgcolor='#00007f'><span size='xx-large' weight='heavy'>?</span>\n", _tmp42_, NULL);
	_tmp44_ = _tmp43_;
	_tmp45_ = g_strconcat (_tmp44_, "</span>", NULL);
	_tmp46_ = _tmp45_;
	gtk_label_set_markup_with_mnemonic (_tmp40_, _tmp46_);
	_g_free0 (_tmp46_);
	_g_free0 (_tmp44_);
	_tmp47_ = label;
	gtk_label_set_justify (_tmp47_, GTK_JUSTIFY_CENTER);
	_tmp48_ = button;
	_tmp49_ = label;
	gtk_container_add ((GtkContainer*) _tmp48_, (GtkWidget*) _tmp49_);
	_tmp50_ = self->priv->new_game_screen;
	gtk_widget_show_all ((GtkWidget*) _tmp50_);
	_g_object_unref0 (label);
	_g_object_unref0 (button);
	_g_object_unref0 (new_game_grid);
}


static void _mines_xsize_spin_cb_gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self) {
	mines_xsize_spin_cb (self, _sender);
}


static void _mines_ysize_spin_cb_gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self) {
	mines_ysize_spin_cb (self, _sender);
}


static void _mines_n_mines_spin_cb_gtk_spin_button_value_changed (GtkSpinButton* _sender, gpointer self) {
	mines_n_mines_spin_cb (self, _sender);
}


static void _mines_show_new_game_screen_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	mines_show_new_game_screen (self);
}


static void _mines_custom_size_clicked_cb_gtk_button_clicked (GtkButton* _sender, gpointer self) {
	mines_custom_size_clicked_cb (self);
}


static void mines_startup_custom_game_screen (Mines* self) {
	GtkAspectFrame* _tmp0_ = NULL;
	GtkAspectFrame* _tmp1_ = NULL;
	GtkGrid* custom_game_grid = NULL;
	GtkGrid* _tmp2_ = NULL;
	GtkAspectFrame* _tmp3_ = NULL;
	GtkLabel* label = NULL;
	const gchar* _tmp4_ = NULL;
	GtkLabel* _tmp5_ = NULL;
	GtkLabel* _tmp6_ = NULL;
	GtkLabel* _tmp7_ = NULL;
	GtkSpinButton* field_width_entry = NULL;
	GtkSpinButton* _tmp8_ = NULL;
	GSettings* _tmp9_ = NULL;
	gint _tmp10_ = 0;
	GtkLabel* _tmp11_ = NULL;
	const gchar* _tmp12_ = NULL;
	GtkLabel* _tmp13_ = NULL;
	GtkLabel* _tmp14_ = NULL;
	GtkLabel* _tmp15_ = NULL;
	GtkSpinButton* field_height_entry = NULL;
	GtkSpinButton* _tmp16_ = NULL;
	GSettings* _tmp17_ = NULL;
	gint _tmp18_ = 0;
	GtkLabel* _tmp19_ = NULL;
	const gchar* _tmp20_ = NULL;
	GtkLabel* _tmp21_ = NULL;
	GtkLabel* _tmp22_ = NULL;
	GtkLabel* _tmp23_ = NULL;
	GtkSpinButton* _tmp24_ = NULL;
	GtkSpinButton* _tmp25_ = NULL;
	GtkSpinButton* _tmp26_ = NULL;
	GSettings* _tmp27_ = NULL;
	gint _tmp28_ = 0;
	GtkSpinButton* _tmp29_ = NULL;
	GtkLabel* _tmp30_ = NULL;
	GtkSpinButton* _tmp31_ = NULL;
	GtkGrid* button_grid = NULL;
	GtkGrid* _tmp32_ = NULL;
	GtkButton* button = NULL;
	GtkButton* _tmp33_ = NULL;
	GtkButton* _tmp34_ = NULL;
	GtkButton* _tmp35_ = NULL;
	GtkButton* _tmp36_ = NULL;
	const gchar* _tmp37_ = NULL;
	GtkButton* _tmp38_ = NULL;
	GtkButton* _tmp39_ = NULL;
	GtkButton* _tmp40_ = NULL;
	GtkImage* _tmp41_ = NULL;
	GtkImage* _tmp42_ = NULL;
	GtkButton* _tmp43_ = NULL;
	GtkButton* _tmp44_ = NULL;
	GtkAspectFrame* _tmp45_ = NULL;
	GtkAspectFrame* _tmp46_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = (GtkAspectFrame*) gtk_aspect_frame_new ("", 0.5f, 0.5f, 0.0f, TRUE);
	g_object_ref_sink (_tmp0_);
	_g_object_unref0 (self->priv->custom_game_screen);
	self->priv->custom_game_screen = _tmp0_;
	_tmp1_ = self->priv->custom_game_screen;
	gtk_frame_set_shadow_type ((GtkFrame*) _tmp1_, GTK_SHADOW_NONE);
	_tmp2_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp2_);
	custom_game_grid = _tmp2_;
	gtk_grid_set_column_homogeneous (custom_game_grid, FALSE);
	gtk_grid_set_column_spacing (custom_game_grid, 12);
	gtk_grid_set_row_spacing (custom_game_grid, 6);
	_tmp3_ = self->priv->custom_game_screen;
	gtk_container_add ((GtkContainer*) _tmp3_, (GtkWidget*) custom_game_grid);
	_tmp4_ = _ ("H_orizontal:");
	_tmp5_ = (GtkLabel*) gtk_label_new_with_mnemonic (_tmp4_);
	g_object_ref_sink (_tmp5_);
	label = _tmp5_;
	_tmp6_ = label;
	gtk_misc_set_alignment ((GtkMisc*) _tmp6_, (gfloat) 0, 0.5f);
	_tmp7_ = label;
	gtk_grid_attach (custom_game_grid, (GtkWidget*) _tmp7_, 0, 0, 1, 1);
	_tmp8_ = (GtkSpinButton*) gtk_spin_button_new_with_range ((gdouble) MINES_XSIZE_MIN, (gdouble) MINES_XSIZE_MAX, (gdouble) 1);
	g_object_ref_sink (_tmp8_);
	field_width_entry = _tmp8_;
	g_signal_connect_object (field_width_entry, "value-changed", (GCallback) _mines_xsize_spin_cb_gtk_spin_button_value_changed, self, 0);
	_tmp9_ = self->priv->settings;
	_tmp10_ = g_settings_get_int (_tmp9_, MINES_KEY_XSIZE);
	gtk_spin_button_set_value (field_width_entry, (gdouble) _tmp10_);
	gtk_grid_attach (custom_game_grid, (GtkWidget*) field_width_entry, 1, 0, 1, 1);
	_tmp11_ = label;
	gtk_label_set_mnemonic_widget (_tmp11_, (GtkWidget*) field_width_entry);
	_tmp12_ = _ ("_Vertical:");
	_tmp13_ = (GtkLabel*) gtk_label_new_with_mnemonic (_tmp12_);
	g_object_ref_sink (_tmp13_);
	_g_object_unref0 (label);
	label = _tmp13_;
	_tmp14_ = label;
	gtk_misc_set_alignment ((GtkMisc*) _tmp14_, (gfloat) 0, 0.5f);
	_tmp15_ = label;
	gtk_grid_attach (custom_game_grid, (GtkWidget*) _tmp15_, 0, 1, 1, 1);
	_tmp16_ = (GtkSpinButton*) gtk_spin_button_new_with_range ((gdouble) MINES_YSIZE_MIN, (gdouble) MINES_YSIZE_MAX, (gdouble) 1);
	g_object_ref_sink (_tmp16_);
	field_height_entry = _tmp16_;
	g_signal_connect_object (field_height_entry, "value-changed", (GCallback) _mines_ysize_spin_cb_gtk_spin_button_value_changed, self, 0);
	_tmp17_ = self->priv->settings;
	_tmp18_ = g_settings_get_int (_tmp17_, MINES_KEY_YSIZE);
	gtk_spin_button_set_value (field_height_entry, (gdouble) _tmp18_);
	gtk_grid_attach (custom_game_grid, (GtkWidget*) field_height_entry, 1, 1, 1, 1);
	_tmp19_ = label;
	gtk_label_set_mnemonic_widget (_tmp19_, (GtkWidget*) field_height_entry);
	_tmp20_ = _ ("_Number of mines:");
	_tmp21_ = (GtkLabel*) gtk_label_new_with_mnemonic (_tmp20_);
	g_object_ref_sink (_tmp21_);
	_g_object_unref0 (label);
	label = _tmp21_;
	_tmp22_ = label;
	gtk_misc_set_alignment ((GtkMisc*) _tmp22_, (gfloat) 0, 0.5f);
	_tmp23_ = label;
	gtk_grid_attach (custom_game_grid, (GtkWidget*) _tmp23_, 0, 2, 1, 1);
	_tmp24_ = (GtkSpinButton*) gtk_spin_button_new_with_range ((gdouble) 1, (gdouble) (MINES_XSIZE_MAX * MINES_YSIZE_MAX), (gdouble) 1);
	g_object_ref_sink (_tmp24_);
	_g_object_unref0 (self->priv->n_mines_spin);
	self->priv->n_mines_spin = _tmp24_;
	_tmp25_ = self->priv->n_mines_spin;
	g_signal_connect_object (_tmp25_, "value-changed", (GCallback) _mines_n_mines_spin_cb_gtk_spin_button_value_changed, self, 0);
	_tmp26_ = self->priv->n_mines_spin;
	_tmp27_ = self->priv->settings;
	_tmp28_ = g_settings_get_int (_tmp27_, MINES_KEY_NMINES);
	gtk_spin_button_set_value (_tmp26_, (gdouble) _tmp28_);
	_tmp29_ = self->priv->n_mines_spin;
	gtk_grid_attach (custom_game_grid, (GtkWidget*) _tmp29_, 1, 2, 1, 1);
	mines_set_n_mines_limit (self);
	_tmp30_ = label;
	_tmp31_ = self->priv->n_mines_spin;
	gtk_label_set_mnemonic_widget (_tmp30_, (GtkWidget*) _tmp31_);
	_tmp32_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp32_);
	button_grid = _tmp32_;
	gtk_grid_set_column_homogeneous (button_grid, FALSE);
	gtk_grid_set_column_spacing (button_grid, 5);
	gtk_grid_attach (custom_game_grid, (GtkWidget*) button_grid, 0, 3, 2, 1);
	_tmp33_ = (GtkButton*) gtk_button_new_from_stock (GTK_STOCK_CANCEL);
	g_object_ref_sink (_tmp33_);
	button = _tmp33_;
	_tmp34_ = button;
	g_object_set ((GtkWidget*) _tmp34_, "expand", TRUE, NULL);
	_tmp35_ = button;
	g_signal_connect_object (_tmp35_, "clicked", (GCallback) _mines_show_new_game_screen_gtk_button_clicked, self, 0);
	_tmp36_ = button;
	gtk_grid_attach (button_grid, (GtkWidget*) _tmp36_, 0, 0, 1, 1);
	_tmp37_ = _ ("_Play Game");
	_tmp38_ = (GtkButton*) gtk_button_new_with_mnemonic (_tmp37_);
	g_object_ref_sink (_tmp38_);
	_g_object_unref0 (button);
	button = _tmp38_;
	_tmp39_ = button;
	g_object_set ((GtkWidget*) _tmp39_, "expand", TRUE, NULL);
	_tmp40_ = button;
	_tmp41_ = (GtkImage*) gtk_image_new_from_stock (GTK_STOCK_GO_FORWARD, GTK_ICON_SIZE_BUTTON);
	g_object_ref_sink (_tmp41_);
	_tmp42_ = _tmp41_;
	gtk_button_set_image (_tmp40_, (GtkWidget*) _tmp42_);
	_g_object_unref0 (_tmp42_);
	_tmp43_ = button;
	g_signal_connect_object (_tmp43_, "clicked", (GCallback) _mines_custom_size_clicked_cb_gtk_button_clicked, self, 0);
	_tmp44_ = button;
	gtk_grid_attach (button_grid, (GtkWidget*) _tmp44_, 1, 0, 1, 1);
	_tmp45_ = self->priv->custom_game_screen;
	gtk_widget_show_all ((GtkWidget*) _tmp45_);
	_tmp46_ = self->priv->custom_game_screen;
	gtk_widget_hide ((GtkWidget*) _tmp46_);
	_g_object_unref0 (button);
	_g_object_unref0 (button_grid);
	_g_object_unref0 (field_height_entry);
	_g_object_unref0 (field_width_entry);
	_g_object_unref0 (label);
	_g_object_unref0 (custom_game_grid);
}


static gboolean mines_window_configure_event_cb (Mines* self, GdkEventConfigure* event) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp4_ = FALSE;
	gboolean _tmp6_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	_tmp2_ = self->priv->is_maximized;
	if (!_tmp2_) {
		gboolean _tmp3_ = FALSE;
		_tmp3_ = self->priv->is_fullscreen;
		_tmp1_ = !_tmp3_;
	} else {
		_tmp1_ = FALSE;
	}
	_tmp4_ = _tmp1_;
	if (_tmp4_) {
		gboolean _tmp5_ = FALSE;
		_tmp5_ = self->priv->window_skip_configure;
		_tmp0_ = !_tmp5_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp6_ = _tmp0_;
	if (_tmp6_) {
		GdkEventConfigure _tmp7_ = {0};
		gint _tmp8_ = 0;
		GdkEventConfigure _tmp9_ = {0};
		gint _tmp10_ = 0;
		_tmp7_ = *event;
		_tmp8_ = _tmp7_.width;
		self->priv->window_width = _tmp8_;
		_tmp9_ = *event;
		_tmp10_ = _tmp9_.height;
		self->priv->window_height = _tmp10_;
	}
	self->priv->window_skip_configure = FALSE;
	result = FALSE;
	return result;
}


static gboolean mines_window_state_event_cb (Mines* self, GdkEventWindowState* event) {
	gboolean result = FALSE;
	GdkEventWindowState _tmp0_ = {0};
	GdkWindowState _tmp1_ = 0;
	GdkEventWindowState _tmp4_ = {0};
	GdkWindowState _tmp5_ = 0;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	_tmp0_ = *event;
	_tmp1_ = _tmp0_.changed_mask;
	if ((_tmp1_ & GDK_WINDOW_STATE_MAXIMIZED) != 0) {
		GdkEventWindowState _tmp2_ = {0};
		GdkWindowState _tmp3_ = 0;
		_tmp2_ = *event;
		_tmp3_ = _tmp2_.new_window_state;
		self->priv->is_maximized = (_tmp3_ & GDK_WINDOW_STATE_MAXIMIZED) != 0;
	}
	_tmp4_ = *event;
	_tmp5_ = _tmp4_.changed_mask;
	if ((_tmp5_ & GDK_WINDOW_STATE_FULLSCREEN) != 0) {
		GdkEventWindowState _tmp6_ = {0};
		GdkWindowState _tmp7_ = 0;
		gboolean _tmp8_ = FALSE;
		_tmp6_ = *event;
		_tmp7_ = _tmp6_.new_window_state;
		self->priv->is_fullscreen = (_tmp7_ & GDK_WINDOW_STATE_FULLSCREEN) != 0;
		_tmp8_ = self->priv->is_fullscreen;
		if (_tmp8_) {
			GtkToolButton* _tmp9_ = NULL;
			const gchar* _tmp10_ = NULL;
			GtkToolButton* _tmp11_ = NULL;
			_tmp9_ = self->priv->fullscreen_button;
			_tmp10_ = _ ("_Leave Fullscreen");
			gtk_tool_button_set_label (_tmp9_, _tmp10_);
			_tmp11_ = self->priv->fullscreen_button;
			gtk_tool_button_set_icon_name (_tmp11_, "view-restore");
		} else {
			GtkToolButton* _tmp12_ = NULL;
			const gchar* _tmp13_ = NULL;
			GtkToolButton* _tmp14_ = NULL;
			_tmp12_ = self->priv->fullscreen_button;
			_tmp13_ = _ ("_Fullscreen");
			gtk_tool_button_set_label (_tmp12_, _tmp13_);
			_tmp14_ = self->priv->fullscreen_button;
			gtk_tool_button_set_icon_name (_tmp14_, "view-fullscreen");
		}
	}
	result = FALSE;
	return result;
}


static gboolean mines_window_focus_out_event_cb (Mines* self, GdkEventFocus* event) {
	gboolean result = FALSE;
	Minefield* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	_tmp0_ = self->priv->minefield;
	if (_tmp0_ != NULL) {
		Minefield* _tmp1_ = NULL;
		_tmp1_ = self->priv->minefield;
		minefield_set_paused (_tmp1_, TRUE);
	}
	result = FALSE;
	return result;
}


static gboolean mines_window_focus_in_event_cb (Mines* self, GdkEventFocus* event) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	Minefield* _tmp1_ = NULL;
	gboolean _tmp3_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	_tmp1_ = self->priv->minefield;
	if (_tmp1_ != NULL) {
		gboolean _tmp2_ = FALSE;
		_tmp2_ = self->priv->pause_requested;
		_tmp0_ = !_tmp2_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp3_ = _tmp0_;
	if (_tmp3_) {
		Minefield* _tmp4_ = NULL;
		_tmp4_ = self->priv->minefield;
		minefield_set_paused (_tmp4_, FALSE);
	}
	result = FALSE;
	return result;
}


static gchar* mines_make_minefield_description (Mines* self, const gchar* color, gint width, gint height, gint n_mines) {
	gchar* result = NULL;
	gchar* size_label = NULL;
	gint _tmp0_ = 0;
	gint _tmp1_ = 0;
	gchar* _tmp2_ = NULL;
	gchar* mines_label = NULL;
	gint _tmp3_ = 0;
	const gchar* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	gchar* _tmp6_ = NULL;
	const gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (color != NULL, NULL);
	_tmp0_ = width;
	_tmp1_ = height;
	_tmp2_ = g_strdup_printf ("%d  %d", _tmp0_, _tmp1_);
	size_label = _tmp2_;
	_tmp3_ = n_mines;
	_tmp4_ = ngettext ("<b>%d</b> mine", "<b>%d</b> mines", (gulong) _tmp3_);
	_tmp5_ = n_mines;
	_tmp6_ = g_strdup_printf (_tmp4_, _tmp5_);
	mines_label = _tmp6_;
	_tmp7_ = color;
	_tmp8_ = g_strdup_printf ("<span fgcolor='%s'><span size='x-large' weight='ultrabold'>%s</span>\n" \
"%s</span>", _tmp7_, size_label, mines_label);
	result = _tmp8_;
	_g_free0 (mines_label);
	_g_free0 (size_label);
	return result;
}


void mines_start (Mines* self) {
	GtkWindow* _tmp0_ = NULL;
	GtkImage* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->window;
	gtk_widget_show ((GtkWidget*) _tmp0_);
	mines_show_new_game_screen (self);
	_tmp1_ = self->priv->smile_face_image;
	mines_set_face_image (self, _tmp1_);
}


static void mines_real_shutdown (GApplication* base) {
	Mines * self;
	GSettings* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	GSettings* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	GSettings* _tmp4_ = NULL;
	gboolean _tmp5_ = FALSE;
	GSettings* _tmp6_ = NULL;
	gboolean _tmp7_ = FALSE;
	self = (Mines*) base;
	G_APPLICATION_CLASS (mines_parent_class)->shutdown ((GApplication*) G_TYPE_CHECK_INSTANCE_CAST (self, GTK_TYPE_APPLICATION, GtkApplication));
	_tmp0_ = self->priv->settings;
	_tmp1_ = self->priv->window_width;
	g_settings_set_int (_tmp0_, "window-width", _tmp1_);
	_tmp2_ = self->priv->settings;
	_tmp3_ = self->priv->window_height;
	g_settings_set_int (_tmp2_, "window-height", _tmp3_);
	_tmp4_ = self->priv->settings;
	_tmp5_ = self->priv->is_maximized;
	g_settings_set_boolean (_tmp4_, "window-is-maximized", _tmp5_);
	_tmp6_ = self->priv->settings;
	_tmp7_ = self->priv->is_fullscreen;
	g_settings_set_boolean (_tmp6_, "window-is-fullscreen", _tmp7_);
}


static void mines_real_activate (GApplication* base) {
	Mines * self;
	GtkWindow* _tmp0_ = NULL;
	self = (Mines*) base;
	_tmp0_ = self->priv->window;
	gtk_widget_show ((GtkWidget*) _tmp0_);
}


static GtkImage* mines_load_face_image (Mines* self, const gchar* name) {
	GtkImage* result = NULL;
	GtkImage* image = NULL;
	GtkImage* _tmp0_ = NULL;
	gchar* filename = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	const gchar* _tmp3_ = NULL;
	GtkImage* _tmp6_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (name != NULL, NULL);
	_tmp0_ = (GtkImage*) gtk_image_new ();
	g_object_ref_sink (_tmp0_);
	image = _tmp0_;
	_tmp1_ = name;
	_tmp2_ = g_build_filename (DATA_DIRECTORY, _tmp1_, NULL);
	filename = _tmp2_;
	_tmp3_ = filename;
	if (_tmp3_ != NULL) {
		GtkImage* _tmp4_ = NULL;
		const gchar* _tmp5_ = NULL;
		_tmp4_ = image;
		_tmp5_ = filename;
		gtk_image_set_from_file (_tmp4_, _tmp5_);
	}
	_tmp6_ = image;
	gtk_widget_show ((GtkWidget*) _tmp6_);
	result = image;
	_g_free0 (filename);
	return result;
}


static void mines_set_face_image (Mines* self, GtkImage* face_image) {
	GtkToolButton* _tmp0_ = NULL;
	GtkImage* _tmp1_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (face_image != NULL);
	_tmp0_ = self->priv->face_button;
	_tmp1_ = face_image;
	gtk_tool_button_set_icon_widget (_tmp0_, (GtkWidget*) _tmp1_);
}


static gboolean mines_view_button_press_event (Mines* self, GtkWidget* widget, GdkEventButton* event) {
	gboolean result = FALSE;
	Minefield* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (widget != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	_tmp0_ = self->priv->minefield;
	_tmp1_ = minefield_get_paused (_tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_) {
		Minefield* _tmp3_ = NULL;
		_tmp3_ = self->priv->minefield;
		minefield_set_paused (_tmp3_, FALSE);
		self->priv->pause_requested = FALSE;
		result = TRUE;
		return result;
	}
	result = FALSE;
	return result;
}


static void mines_quit_cb (Mines* self) {
	GtkWindow* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->window;
	gtk_widget_destroy ((GtkWidget*) _tmp0_);
}


static void mines_update_flag_label (Mines* self) {
	GtkLabel* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	Minefield* _tmp2_ = NULL;
	guint _tmp3_ = 0U;
	guint _tmp4_ = 0U;
	Minefield* _tmp5_ = NULL;
	guint _tmp6_ = 0U;
	gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->flag_label;
	_tmp1_ = _ ("Flags: %u/%u");
	_tmp2_ = self->priv->minefield;
	_tmp3_ = minefield_get_n_flags (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = self->priv->minefield;
	_tmp6_ = _tmp5_->n_mines;
	_tmp7_ = g_strdup_printf (_tmp1_, _tmp4_, _tmp6_);
	_tmp8_ = _tmp7_;
	gtk_label_set_text (_tmp0_, _tmp8_);
	_g_free0 (_tmp8_);
}


static gint mines_show_scores (Mines* self, HistoryEntry* selected_entry, gboolean show_quit) {
	gint result = 0;
	ScoreDialog* dialog = NULL;
	History* _tmp0_ = NULL;
	HistoryEntry* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	ScoreDialog* _tmp3_ = NULL;
	GtkWindow* _tmp4_ = NULL;
	gint _result_ = 0;
	gint _tmp5_ = 0;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->priv->history;
	_tmp1_ = selected_entry;
	_tmp2_ = show_quit;
	_tmp3_ = score_dialog_new (_tmp0_, _tmp1_, _tmp2_);
	g_object_ref_sink (_tmp3_);
	dialog = _tmp3_;
	gtk_window_set_modal ((GtkWindow*) dialog, TRUE);
	_tmp4_ = self->priv->window;
	gtk_window_set_transient_for ((GtkWindow*) dialog, _tmp4_);
	_tmp5_ = gtk_dialog_run ((GtkDialog*) dialog);
	_result_ = _tmp5_;
	gtk_widget_destroy ((GtkWidget*) dialog);
	result = _result_;
	_g_object_unref0 (dialog);
	return result;
}


static void mines_fullscreen_cb (Mines* self) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->is_fullscreen;
	if (_tmp0_) {
		GtkWindow* _tmp1_ = NULL;
		_tmp1_ = self->priv->window;
		gtk_window_unfullscreen (_tmp1_);
	} else {
		GtkWindow* _tmp2_ = NULL;
		_tmp2_ = self->priv->window;
		gtk_window_fullscreen (_tmp2_);
	}
}


static void mines_scores_cb (Mines* self) {
	g_return_if_fail (self != NULL);
	mines_show_scores (self, NULL, FALSE);
}


static void mines_reset_scores_cb (Mines* self) {
	History* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->history;
	history_reset (_tmp0_);
}


static void mines_show_custom_game_screen (Mines* self) {
	GtkAspectFrame* _tmp0_ = NULL;
	MinefieldView* _tmp1_ = NULL;
	GtkAspectFrame* _tmp2_ = NULL;
	g_return_if_fail (self != NULL);
	self->priv->is_new_game_screen = FALSE;
	_tmp0_ = self->priv->custom_game_screen;
	gtk_widget_show ((GtkWidget*) _tmp0_);
	_tmp1_ = self->priv->minefield_view;
	gtk_widget_hide ((GtkWidget*) _tmp1_);
	_tmp2_ = self->priv->new_game_screen;
	gtk_widget_hide ((GtkWidget*) _tmp2_);
}


static gboolean mines_can_start_new_game (Mines* self) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	gboolean _tmp2_ = FALSE;
	Minefield* _tmp3_ = NULL;
	gboolean _tmp7_ = FALSE;
	gboolean _tmp10_ = FALSE;
	gboolean _tmp14_ = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp3_ = self->priv->minefield;
	if (_tmp3_ != NULL) {
		Minefield* _tmp4_ = NULL;
		guint _tmp5_ = 0U;
		guint _tmp6_ = 0U;
		_tmp4_ = self->priv->minefield;
		_tmp5_ = minefield_get_n_cleared (_tmp4_);
		_tmp6_ = _tmp5_;
		_tmp2_ = _tmp6_ > ((guint) 0);
	} else {
		_tmp2_ = FALSE;
	}
	_tmp7_ = _tmp2_;
	if (_tmp7_) {
		Minefield* _tmp8_ = NULL;
		gboolean _tmp9_ = FALSE;
		_tmp8_ = self->priv->minefield;
		_tmp9_ = _tmp8_->exploded;
		_tmp1_ = !_tmp9_;
	} else {
		_tmp1_ = FALSE;
	}
	_tmp10_ = _tmp1_;
	if (_tmp10_) {
		Minefield* _tmp11_ = NULL;
		gboolean _tmp12_ = FALSE;
		gboolean _tmp13_ = FALSE;
		_tmp11_ = self->priv->minefield;
		_tmp12_ = minefield_get_is_complete (_tmp11_);
		_tmp13_ = _tmp12_;
		_tmp0_ = !_tmp13_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp14_ = _tmp0_;
	if (_tmp14_) {
		gboolean was_paused = FALSE;
		Minefield* _tmp15_ = NULL;
		gboolean _tmp16_ = FALSE;
		gboolean _tmp17_ = FALSE;
		Minefield* _tmp18_ = NULL;
		GtkMessageDialog* dialog = NULL;
		GtkWindow* _tmp19_ = NULL;
		const gchar* _tmp20_ = NULL;
		GtkMessageDialog* _tmp21_ = NULL;
		GtkMessageDialog* _tmp22_ = NULL;
		const gchar* _tmp23_ = NULL;
		GtkMessageDialog* _tmp24_ = NULL;
		const gchar* _tmp25_ = NULL;
		const gchar* _tmp26_ = NULL;
		gint _result_ = 0;
		GtkMessageDialog* _tmp27_ = NULL;
		gint _tmp28_ = 0;
		GtkMessageDialog* _tmp29_ = NULL;
		gint _tmp30_ = 0;
		_tmp15_ = self->priv->minefield;
		_tmp16_ = minefield_get_paused (_tmp15_);
		_tmp17_ = _tmp16_;
		was_paused = _tmp17_;
		_tmp18_ = self->priv->minefield;
		minefield_set_paused (_tmp18_, TRUE);
		_tmp19_ = self->priv->window;
		_tmp20_ = _ ("Do you want to start a new game?");
		_tmp21_ = (GtkMessageDialog*) gtk_message_dialog_new (_tmp19_, GTK_DIALOG_MODAL, GTK_MESSAGE_QUESTION, GTK_BUTTONS_NONE, "%s", _tmp20_);
		g_object_ref_sink (_tmp21_);
		dialog = _tmp21_;
		_tmp22_ = dialog;
		_tmp23_ = _ ("If you start a new game, your current progress will be lost.");
		g_object_set (_tmp22_, "secondary-text", _tmp23_, NULL);
		_tmp24_ = dialog;
		_tmp25_ = _ ("Keep Current Game");
		_tmp26_ = _ ("Start New Game");
		gtk_dialog_add_buttons ((GtkDialog*) _tmp24_, _tmp25_, GTK_RESPONSE_DELETE_EVENT, _tmp26_, GTK_RESPONSE_ACCEPT, NULL, NULL);
		_tmp27_ = dialog;
		_tmp28_ = gtk_dialog_run ((GtkDialog*) _tmp27_);
		_result_ = _tmp28_;
		_tmp29_ = dialog;
		gtk_widget_destroy ((GtkWidget*) _tmp29_);
		_tmp30_ = _result_;
		if (_tmp30_ != ((gint) GTK_RESPONSE_ACCEPT)) {
			Minefield* _tmp31_ = NULL;
			gboolean _tmp32_ = FALSE;
			_tmp31_ = self->priv->minefield;
			_tmp32_ = was_paused;
			minefield_set_paused (_tmp31_, _tmp32_);
			result = FALSE;
			_g_object_unref0 (dialog);
			return result;
		}
		_g_object_unref0 (dialog);
	}
	result = TRUE;
	return result;
}


static void mines_show_new_game_screen (Mines* self) {
	gboolean _tmp0_ = FALSE;
	Minefield* _tmp1_ = NULL;
	GtkAspectFrame* _tmp4_ = NULL;
	MinefieldView* _tmp5_ = NULL;
	GtkAspectFrame* _tmp6_ = NULL;
	GtkLabel* _tmp7_ = NULL;
	GtkImage* _tmp8_ = NULL;
	GtkWindow* _tmp9_ = NULL;
	gint _tmp10_ = 0;
	gint _tmp11_ = 0;
	GSimpleAction* _tmp12_ = NULL;
	GSimpleAction* _tmp13_ = NULL;
	GSimpleAction* _tmp14_ = NULL;
	GSimpleAction* _tmp15_ = NULL;
	GSimpleAction* _tmp16_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->is_new_game_screen;
	if (_tmp0_) {
		return;
	}
	_tmp1_ = self->priv->minefield;
	if (_tmp1_ != NULL) {
		Minefield* _tmp2_ = NULL;
		Minefield* _tmp3_ = NULL;
		_tmp2_ = self->priv->minefield;
		minefield_set_paused (_tmp2_, FALSE);
		self->priv->pause_requested = FALSE;
		_tmp3_ = self->priv->minefield;
		g_signal_handlers_disconnect_by_func (_tmp3_, NULL, self);
	}
	_minefield_unref0 (self->priv->minefield);
	self->priv->minefield = NULL;
	self->priv->is_new_game_screen = TRUE;
	_tmp4_ = self->priv->custom_game_screen;
	gtk_widget_hide ((GtkWidget*) _tmp4_);
	_tmp5_ = self->priv->minefield_view;
	gtk_widget_hide ((GtkWidget*) _tmp5_);
	_tmp6_ = self->priv->new_game_screen;
	gtk_widget_show ((GtkWidget*) _tmp6_);
	_tmp7_ = self->priv->flag_label;
	gtk_label_set_text (_tmp7_, "");
	_tmp8_ = self->priv->smile_face_image;
	mines_set_face_image (self, _tmp8_);
	_tmp9_ = self->priv->window;
	_tmp10_ = self->priv->window_width;
	_tmp11_ = self->priv->window_height;
	gtk_window_resize (_tmp9_, _tmp10_, _tmp11_);
	_tmp12_ = self->priv->new_game_action;
	g_simple_action_set_enabled (_tmp12_, FALSE);
	_tmp13_ = self->priv->repeat_size_action;
	g_simple_action_set_enabled (_tmp13_, FALSE);
	_tmp14_ = self->priv->hint_action;
	g_simple_action_set_enabled (_tmp14_, FALSE);
	_tmp15_ = self->priv->auto_play_action;
	g_simple_action_set_enabled (_tmp15_, FALSE);
	_tmp16_ = self->priv->pause_action;
	g_simple_action_set_enabled (_tmp16_, FALSE);
}


static void _mines_marks_changed_cb_minefield_marks_changed (Minefield* _sender, gpointer self) {
	mines_marks_changed_cb (self, _sender);
}


static void _mines_explode_cb_minefield_explode (Minefield* _sender, gpointer self) {
	mines_explode_cb (self, _sender);
}


static void _mines_cleared_cb_minefield_cleared (Minefield* _sender, gpointer self) {
	mines_cleared_cb (self, _sender);
}


static void _mines_tick_cb_minefield_tick (Minefield* _sender, gpointer self) {
	mines_tick_cb (self);
}


static void _mines_paused_changed_cb_minefield_paused_changed (Minefield* _sender, gpointer self) {
	mines_paused_changed_cb (self);
}


static void mines_start_game (Mines* self) {
	GtkAspectFrame* _tmp0_ = NULL;
	MinefieldView* _tmp1_ = NULL;
	MinefieldView* _tmp2_ = NULL;
	GtkAspectFrame* _tmp3_ = NULL;
	GtkImage* _tmp4_ = NULL;
	gint x = 0;
	gint y = 0;
	gint n = 0;
	GSettings* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	Minefield* _tmp18_ = NULL;
	gint _tmp20_ = 0;
	gint _tmp21_ = 0;
	gint _tmp22_ = 0;
	Minefield* _tmp23_ = NULL;
	Minefield* _tmp24_ = NULL;
	Minefield* _tmp25_ = NULL;
	Minefield* _tmp26_ = NULL;
	Minefield* _tmp27_ = NULL;
	Minefield* _tmp28_ = NULL;
	MinefieldView* _tmp29_ = NULL;
	Minefield* _tmp30_ = NULL;
	GSimpleAction* _tmp31_ = NULL;
	GSimpleAction* _tmp32_ = NULL;
	GSimpleAction* _tmp33_ = NULL;
	GSimpleAction* _tmp34_ = NULL;
	GSimpleAction* _tmp35_ = NULL;
	Minefield* _tmp36_ = NULL;
	g_return_if_fail (self != NULL);
	self->priv->is_new_game_screen = FALSE;
	_tmp0_ = self->priv->custom_game_screen;
	gtk_widget_hide ((GtkWidget*) _tmp0_);
	self->priv->window_skip_configure = TRUE;
	_tmp1_ = self->priv->minefield_view;
	gtk_widget_show ((GtkWidget*) _tmp1_);
	_tmp2_ = self->priv->minefield_view;
	g_object_set ((GtkWidget*) _tmp2_, "has-focus", TRUE, NULL);
	_tmp3_ = self->priv->new_game_screen;
	gtk_widget_hide ((GtkWidget*) _tmp3_);
	_tmp4_ = self->priv->smile_face_image;
	mines_set_face_image (self, _tmp4_);
	_tmp5_ = self->priv->settings;
	_tmp6_ = g_settings_get_int (_tmp5_, MINES_KEY_MODE);
	switch (_tmp6_) {
		case 0:
		{
			x = 8;
			y = 8;
			n = 10;
			break;
		}
		case 1:
		{
			x = 16;
			y = 16;
			n = 40;
			break;
		}
		case 2:
		{
			x = 30;
			y = 16;
			n = 99;
			break;
		}
		default:
		case 3:
		{
			GSettings* _tmp7_ = NULL;
			gint _tmp8_ = 0;
			gint _tmp9_ = 0;
			GSettings* _tmp10_ = NULL;
			gint _tmp11_ = 0;
			gint _tmp12_ = 0;
			GSettings* _tmp13_ = NULL;
			gint _tmp14_ = 0;
			gint _tmp15_ = 0;
			gint _tmp16_ = 0;
			gint _tmp17_ = 0;
			_tmp7_ = self->priv->settings;
			_tmp8_ = g_settings_get_int (_tmp7_, MINES_KEY_XSIZE);
			_tmp9_ = CLAMP (_tmp8_, MINES_XSIZE_MIN, MINES_XSIZE_MAX);
			x = _tmp9_;
			_tmp10_ = self->priv->settings;
			_tmp11_ = g_settings_get_int (_tmp10_, MINES_KEY_YSIZE);
			_tmp12_ = CLAMP (_tmp11_, MINES_YSIZE_MIN, MINES_YSIZE_MAX);
			y = _tmp12_;
			_tmp13_ = self->priv->settings;
			_tmp14_ = g_settings_get_int (_tmp13_, MINES_KEY_NMINES);
			_tmp15_ = x;
			_tmp16_ = y;
			_tmp17_ = CLAMP (_tmp14_, 1, (_tmp15_ * _tmp16_) - 10);
			n = _tmp17_;
			break;
		}
	}
	_tmp18_ = self->priv->minefield;
	if (_tmp18_ != NULL) {
		Minefield* _tmp19_ = NULL;
		_tmp19_ = self->priv->minefield;
		g_signal_handlers_disconnect_by_func (_tmp19_, NULL, self);
	}
	_tmp20_ = x;
	_tmp21_ = y;
	_tmp22_ = n;
	_tmp23_ = minefield_new ((guint) _tmp20_, (guint) _tmp21_, (guint) _tmp22_);
	_minefield_unref0 (self->priv->minefield);
	self->priv->minefield = _tmp23_;
	_tmp24_ = self->priv->minefield;
	g_signal_connect_object (_tmp24_, "marks-changed", (GCallback) _mines_marks_changed_cb_minefield_marks_changed, self, 0);
	_tmp25_ = self->priv->minefield;
	g_signal_connect_object (_tmp25_, "explode", (GCallback) _mines_explode_cb_minefield_explode, self, 0);
	_tmp26_ = self->priv->minefield;
	g_signal_connect_object (_tmp26_, "cleared", (GCallback) _mines_cleared_cb_minefield_cleared, self, 0);
	_tmp27_ = self->priv->minefield;
	g_signal_connect_object (_tmp27_, "tick", (GCallback) _mines_tick_cb_minefield_tick, self, 0);
	_tmp28_ = self->priv->minefield;
	g_signal_connect_object (_tmp28_, "paused-changed", (GCallback) _mines_paused_changed_cb_minefield_paused_changed, self, 0);
	_tmp29_ = self->priv->minefield_view;
	_tmp30_ = self->priv->minefield;
	minefield_view_set_minefield (_tmp29_, _tmp30_);
	mines_update_flag_label (self);
	_tmp31_ = self->priv->new_game_action;
	g_simple_action_set_enabled (_tmp31_, TRUE);
	_tmp32_ = self->priv->repeat_size_action;
	g_simple_action_set_enabled (_tmp32_, TRUE);
	_tmp33_ = self->priv->hint_action;
	g_simple_action_set_enabled (_tmp33_, TRUE);
	_tmp34_ = self->priv->auto_play_action;
	g_simple_action_set_enabled (_tmp34_, TRUE);
	_tmp35_ = self->priv->pause_action;
	g_simple_action_set_enabled (_tmp35_, TRUE);
	_tmp36_ = self->priv->minefield;
	minefield_set_paused (_tmp36_, FALSE);
	self->priv->pause_requested = FALSE;
}


static void mines_hint_cb (Mines* self) {
	Minefield* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->minefield;
	minefield_hint (_tmp0_);
}


static void mines_auto_play_cb (Mines* self) {
	Minefield* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->minefield;
	minefield_auto_play (_tmp0_);
}


static void mines_new_game_cb (Mines* self) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = mines_can_start_new_game (self);
	if (_tmp0_) {
		mines_show_new_game_screen (self);
	}
}


static void mines_repeat_size_cb (Mines* self) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = mines_can_start_new_game (self);
	if (_tmp0_) {
		mines_start_game (self);
	}
}


static void mines_toggle_pause_cb (Mines* self) {
	gboolean _tmp0_ = FALSE;
	Minefield* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gboolean _tmp5_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp1_ = self->priv->minefield;
	_tmp2_ = minefield_get_paused (_tmp1_);
	_tmp3_ = _tmp2_;
	if (_tmp3_) {
		gboolean _tmp4_ = FALSE;
		_tmp4_ = self->priv->pause_requested;
		_tmp0_ = !_tmp4_;
	} else {
		_tmp0_ = FALSE;
	}
	_tmp5_ = _tmp0_;
	if (_tmp5_) {
		self->priv->pause_requested = TRUE;
	} else {
		Minefield* _tmp6_ = NULL;
		Minefield* _tmp7_ = NULL;
		gboolean _tmp8_ = FALSE;
		gboolean _tmp9_ = FALSE;
		Minefield* _tmp10_ = NULL;
		gboolean _tmp11_ = FALSE;
		gboolean _tmp12_ = FALSE;
		_tmp6_ = self->priv->minefield;
		_tmp7_ = self->priv->minefield;
		_tmp8_ = minefield_get_paused (_tmp7_);
		_tmp9_ = _tmp8_;
		minefield_set_paused (_tmp6_, !_tmp9_);
		_tmp10_ = self->priv->minefield;
		_tmp11_ = minefield_get_paused (_tmp10_);
		_tmp12_ = _tmp11_;
		self->priv->pause_requested = _tmp12_;
	}
}


static void mines_paused_changed_cb (Mines* self) {
	GMenu* _tmp0_ = NULL;
	Minefield* _tmp1_ = NULL;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->app_main_menu;
	g_menu_remove (_tmp0_, 2);
	_tmp1_ = self->priv->minefield;
	_tmp2_ = minefield_get_paused (_tmp1_);
	_tmp3_ = _tmp2_;
	if (_tmp3_) {
		GSimpleAction* _tmp4_ = NULL;
		GSimpleAction* _tmp5_ = NULL;
		GtkToolButton* _tmp6_ = NULL;
		GtkToolButton* _tmp7_ = NULL;
		const gchar* _tmp8_ = NULL;
		gboolean _tmp9_ = FALSE;
		_tmp4_ = self->priv->hint_action;
		g_simple_action_set_enabled (_tmp4_, FALSE);
		_tmp5_ = self->priv->auto_play_action;
		g_simple_action_set_enabled (_tmp5_, FALSE);
		_tmp6_ = self->priv->pause_button;
		gtk_tool_button_set_icon_name (_tmp6_, "media-playback-start");
		_tmp7_ = self->priv->pause_button;
		_tmp8_ = _ ("Res_ume");
		gtk_tool_button_set_label (_tmp7_, _tmp8_);
		_tmp9_ = self->priv->pause_requested;
		if (_tmp9_) {
			GMenu* _tmp10_ = NULL;
			const gchar* _tmp11_ = NULL;
			_tmp10_ = self->priv->app_main_menu;
			_tmp11_ = _ ("Res_ume");
			g_menu_insert (_tmp10_, 2, _tmp11_, "app.pause");
		} else {
			GMenu* _tmp12_ = NULL;
			const gchar* _tmp13_ = NULL;
			_tmp12_ = self->priv->app_main_menu;
			_tmp13_ = _ ("_Pause");
			g_menu_insert (_tmp12_, 2, _tmp13_, "app.pause");
		}
	} else {
		GSimpleAction* _tmp14_ = NULL;
		GSimpleAction* _tmp15_ = NULL;
		GtkToolButton* _tmp16_ = NULL;
		GtkToolButton* _tmp17_ = NULL;
		const gchar* _tmp18_ = NULL;
		GMenu* _tmp19_ = NULL;
		const gchar* _tmp20_ = NULL;
		_tmp14_ = self->priv->hint_action;
		g_simple_action_set_enabled (_tmp14_, TRUE);
		_tmp15_ = self->priv->auto_play_action;
		g_simple_action_set_enabled (_tmp15_, TRUE);
		_tmp16_ = self->priv->pause_button;
		gtk_tool_button_set_icon_name (_tmp16_, "media-playback-pause");
		_tmp17_ = self->priv->pause_button;
		_tmp18_ = _ ("_Pause");
		gtk_tool_button_set_label (_tmp17_, _tmp18_);
		_tmp19_ = self->priv->app_main_menu;
		_tmp20_ = _ ("_Pause");
		g_menu_insert (_tmp19_, 2, _tmp20_, "app.pause");
	}
}


static void mines_marks_changed_cb (Mines* self, Minefield* minefield) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (minefield != NULL);
	mines_update_flag_label (self);
}


static void mines_explode_cb (Mines* self, Minefield* minefield) {
	GtkImage* _tmp0_ = NULL;
	GSimpleAction* _tmp1_ = NULL;
	GSimpleAction* _tmp2_ = NULL;
	GSimpleAction* _tmp3_ = NULL;
	History* _tmp4_ = NULL;
	Minefield* _tmp5_ = NULL;
	guint _tmp6_ = 0U;
	Minefield* _tmp7_ = NULL;
	guint _tmp8_ = 0U;
	Minefield* _tmp9_ = NULL;
	guint _tmp10_ = 0U;
	g_return_if_fail (self != NULL);
	g_return_if_fail (minefield != NULL);
	_tmp0_ = self->priv->sad_face_image;
	mines_set_face_image (self, _tmp0_);
	_tmp1_ = self->priv->hint_action;
	g_simple_action_set_enabled (_tmp1_, FALSE);
	_tmp2_ = self->priv->auto_play_action;
	g_simple_action_set_enabled (_tmp2_, FALSE);
	_tmp3_ = self->priv->pause_action;
	g_simple_action_set_enabled (_tmp3_, FALSE);
	_tmp4_ = self->priv->history;
	_tmp5_ = minefield;
	_tmp6_ = _tmp5_->width;
	_tmp7_ = minefield;
	_tmp8_ = _tmp7_->height;
	_tmp9_ = minefield;
	_tmp10_ = _tmp9_->n_mines;
	history_addLose (_tmp4_, _tmp6_, _tmp8_, _tmp10_);
}


static void mines_cleared_cb (Mines* self, Minefield* minefield) {
	GtkImage* _tmp0_ = NULL;
	GDateTime* date = NULL;
	GDateTime* _tmp1_ = NULL;
	guint duration = 0U;
	Minefield* _tmp2_ = NULL;
	gdouble _tmp3_ = 0.0;
	gdouble _tmp4_ = 0.0;
	HistoryEntry* entry = NULL;
	GDateTime* _tmp5_ = NULL;
	Minefield* _tmp6_ = NULL;
	guint _tmp7_ = 0U;
	Minefield* _tmp8_ = NULL;
	guint _tmp9_ = 0U;
	Minefield* _tmp10_ = NULL;
	guint _tmp11_ = 0U;
	guint _tmp12_ = 0U;
	HistoryEntry* _tmp13_ = NULL;
	History* _tmp14_ = NULL;
	Minefield* _tmp15_ = NULL;
	guint _tmp16_ = 0U;
	Minefield* _tmp17_ = NULL;
	guint _tmp18_ = 0U;
	Minefield* _tmp19_ = NULL;
	guint _tmp20_ = 0U;
	History* _tmp21_ = NULL;
	HistoryEntry* _tmp22_ = NULL;
	History* _tmp23_ = NULL;
	HistoryEntry* _tmp24_ = NULL;
	gint _tmp25_ = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (minefield != NULL);
	_tmp0_ = self->priv->win_face_image;
	mines_set_face_image (self, _tmp0_);
	_tmp1_ = g_date_time_new_now_local ();
	date = _tmp1_;
	_tmp2_ = minefield;
	_tmp3_ = minefield_get_elapsed (_tmp2_);
	_tmp4_ = _tmp3_;
	duration = (guint) (_tmp4_ + 0.5);
	_tmp5_ = date;
	_tmp6_ = minefield;
	_tmp7_ = _tmp6_->width;
	_tmp8_ = minefield;
	_tmp9_ = _tmp8_->height;
	_tmp10_ = minefield;
	_tmp11_ = _tmp10_->n_mines;
	_tmp12_ = duration;
	_tmp13_ = history_entry_new (_tmp5_, _tmp7_, _tmp9_, _tmp11_, _tmp12_);
	entry = _tmp13_;
	_tmp14_ = self->priv->history;
	_tmp15_ = minefield;
	_tmp16_ = _tmp15_->width;
	_tmp17_ = minefield;
	_tmp18_ = _tmp17_->height;
	_tmp19_ = minefield;
	_tmp20_ = _tmp19_->n_mines;
	history_addWin (_tmp14_, _tmp16_, _tmp18_, _tmp20_);
	_tmp21_ = self->priv->history;
	_tmp22_ = entry;
	history_add (_tmp21_, _tmp22_);
	_tmp23_ = self->priv->history;
	history_save (_tmp23_);
	_tmp24_ = entry;
	_tmp25_ = mines_show_scores (self, _tmp24_, TRUE);
	if (_tmp25_ == ((gint) GTK_RESPONSE_CLOSE)) {
		GtkWindow* _tmp26_ = NULL;
		_tmp26_ = self->priv->window;
		gtk_widget_destroy ((GtkWidget*) _tmp26_);
	} else {
		mines_show_new_game_screen (self);
	}
	_history_entry_unref0 (entry);
	_g_date_time_unref0 (date);
}


static void mines_tick_cb (Mines* self) {
	gint elapsed = 0;
	Minefield* _tmp0_ = NULL;
	gint hours = 0;
	gint _tmp4_ = 0;
	gint minutes = 0;
	gint _tmp5_ = 0;
	gint seconds = 0;
	gint _tmp6_ = 0;
	GtkLabel* _tmp7_ = NULL;
	const gchar* _tmp8_ = NULL;
	gchar* _tmp9_ = NULL;
	gchar* _tmp10_ = NULL;
	g_return_if_fail (self != NULL);
	elapsed = 0;
	_tmp0_ = self->priv->minefield;
	if (_tmp0_ != NULL) {
		Minefield* _tmp1_ = NULL;
		gdouble _tmp2_ = 0.0;
		gdouble _tmp3_ = 0.0;
		_tmp1_ = self->priv->minefield;
		_tmp2_ = minefield_get_elapsed (_tmp1_);
		_tmp3_ = _tmp2_;
		elapsed = (gint) (_tmp3_ + 0.5);
	}
	_tmp4_ = elapsed;
	hours = _tmp4_ / 3600;
	_tmp5_ = elapsed;
	minutes = (_tmp5_ - (hours * 3600)) / 60;
	_tmp6_ = elapsed;
	seconds = (_tmp6_ - (hours * 3600)) - (minutes * 60);
	_tmp7_ = self->priv->clock_label;
	_tmp8_ = _ ("Time");
	_tmp9_ = g_strdup_printf ("%s: %02d:%02d:%02d", _tmp8_, hours, minutes, seconds);
	_tmp10_ = _tmp9_;
	gtk_label_set_text (_tmp7_, _tmp10_);
	_g_free0 (_tmp10_);
}


static void mines_look_cb (Mines* self, MinefieldView* minefield_view) {
	GtkImage* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (minefield_view != NULL);
	_tmp0_ = self->priv->worried_face_image;
	mines_set_face_image (self, _tmp0_);
}


static void mines_unlook_cb (Mines* self, MinefieldView* minefield_view) {
	GtkImage* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (minefield_view != NULL);
	_tmp0_ = self->priv->cool_face_image;
	mines_set_face_image (self, _tmp0_);
}


static void mines_about_cb (Mines* self) {
	gchar** authors = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	const gchar* _tmp6_ = NULL;
	gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	gchar* _tmp9_ = NULL;
	const gchar* _tmp10_ = NULL;
	gchar* _tmp11_ = NULL;
	gchar* _tmp12_ = NULL;
	gchar* _tmp13_ = NULL;
	gchar** _tmp14_ = NULL;
	gint authors_length1 = 0;
	gint _authors_size_ = 0;
	gchar** artists = NULL;
	const gchar* _tmp15_ = NULL;
	gchar* _tmp16_ = NULL;
	gchar* _tmp17_ = NULL;
	gchar* _tmp18_ = NULL;
	gchar* _tmp19_ = NULL;
	const gchar* _tmp20_ = NULL;
	gchar* _tmp21_ = NULL;
	gchar* _tmp22_ = NULL;
	gchar** _tmp23_ = NULL;
	gint artists_length1 = 0;
	gint _artists_size_ = 0;
	gchar** documenters = NULL;
	gchar* _tmp24_ = NULL;
	gchar** _tmp25_ = NULL;
	gint documenters_length1 = 0;
	gint _documenters_size_ = 0;
	gchar* license = NULL;
	gchar* _tmp26_ = NULL;
	GtkWindow* _tmp27_ = NULL;
	const gchar* _tmp28_ = NULL;
	const gchar* _tmp29_ = NULL;
	const gchar* _tmp30_ = NULL;
	const gchar* _tmp31_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = _ ("Main game:");
	_tmp1_ = g_strdup (_tmp0_);
	_tmp2_ = g_strdup ("Pista");
	_tmp3_ = g_strdup ("Szekeres Istvan");
	_tmp4_ = g_strdup ("Robert Ancell");
	_tmp5_ = g_strdup ("");
	_tmp6_ = _ ("Score:");
	_tmp7_ = g_strdup (_tmp6_);
	_tmp8_ = g_strdup ("Horacio J. Pea");
	_tmp9_ = g_strdup ("");
	_tmp10_ = _ ("Resizing and SVG support:");
	_tmp11_ = g_strdup (_tmp10_);
	_tmp12_ = g_strdup ("Steve Chaplin");
	_tmp13_ = g_strdup ("Callum McKenzie");
	_tmp14_ = g_new0 (gchar*, 12 + 1);
	_tmp14_[0] = _tmp1_;
	_tmp14_[1] = _tmp2_;
	_tmp14_[2] = _tmp3_;
	_tmp14_[3] = _tmp4_;
	_tmp14_[4] = _tmp5_;
	_tmp14_[5] = _tmp7_;
	_tmp14_[6] = _tmp8_;
	_tmp14_[7] = _tmp9_;
	_tmp14_[8] = _tmp11_;
	_tmp14_[9] = _tmp12_;
	_tmp14_[10] = _tmp13_;
	_tmp14_[11] = NULL;
	authors = _tmp14_;
	authors_length1 = 12;
	_authors_size_ = authors_length1;
	_tmp15_ = _ ("Faces:");
	_tmp16_ = g_strdup (_tmp15_);
	_tmp17_ = g_strdup ("tigert");
	_tmp18_ = g_strdup ("Lapo Calamandrei and Ulisse Perusin");
	_tmp19_ = g_strdup ("");
	_tmp20_ = _ ("Graphics:");
	_tmp21_ = g_strdup (_tmp20_);
	_tmp22_ = g_strdup ("Richard Hoelscher");
	_tmp23_ = g_new0 (gchar*, 7 + 1);
	_tmp23_[0] = _tmp16_;
	_tmp23_[1] = _tmp17_;
	_tmp23_[2] = _tmp18_;
	_tmp23_[3] = _tmp19_;
	_tmp23_[4] = _tmp21_;
	_tmp23_[5] = _tmp22_;
	_tmp23_[6] = NULL;
	artists = _tmp23_;
	artists_length1 = 7;
	_artists_size_ = artists_length1;
	_tmp24_ = g_strdup ("Callum McKenzie");
	_tmp25_ = g_new0 (gchar*, 2 + 1);
	_tmp25_[0] = _tmp24_;
	_tmp25_[1] = NULL;
	documenters = _tmp25_;
	documenters_length1 = 2;
	_documenters_size_ = documenters_length1;
	_tmp26_ = g_strdup ("Mines is free software; you can redistribute it and/or modify it under" \
" the terms of the GNU General Public License as published by the Free " \
"Software Foundation; either version 2 of the License, or (at your opti" \
"on) any later version.\n" \
"\n" \
"Mines is distributed in the hope that it will be useful, but WITHOUT A" \
"NY WARRANTY; without even the implied warranty of MERCHANTABILITY or F" \
"ITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License fo" \
"r more details.\n" \
"\n" \
"You should have received a copy of the GNU General Public License alon" \
"g with Mines; if not, write to the Free Software Foundation, Inc., 51 " \
"Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA");
	license = _tmp26_;
	_tmp27_ = self->priv->window;
	_tmp28_ = _ ("Mines");
	_tmp29_ = _ ("The popular logic puzzle minesweeper. Clear mines from a board using h" \
"ints from squares you have already uncovered.\n" \
"\n" \
"Mines is a part of GNOME Games.");
	_tmp30_ = _ ("translator-credits");
	_tmp31_ = _ ("GNOME Games web site");
	gtk_show_about_dialog (_tmp27_, "name", _tmp28_, "version", VERSION, "comments", _tmp29_, "copyright", "Copyright \xc2\xa9 1997-2008 Free Software Foundation, Inc.", "license", license, "authors", authors, "artists", artists, "documenters", documenters, "translator-credits", _tmp30_, "logo-icon-name", "gnome-mines", "website", "http://www.gnome.org/projects/gnome-games/", "website-label", _tmp31_, "wrap-license", TRUE, NULL, NULL);
	_g_free0 (license);
	documenters = (_vala_array_free (documenters, documenters_length1, (GDestroyNotify) g_free), NULL);
	artists = (_vala_array_free (artists, artists_length1, (GDestroyNotify) g_free), NULL);
	authors = (_vala_array_free (authors, authors_length1, (GDestroyNotify) g_free), NULL);
}


static void mines_set_n_mines_limit (Mines* self) {
	gint max_mines = 0;
	GSettings* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	GSettings* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	GSettings* _tmp4_ = NULL;
	gint _tmp5_ = 0;
	gint _tmp6_ = 0;
	GtkSpinButton* _tmp11_ = NULL;
	gint _tmp12_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->settings;
	_tmp1_ = g_settings_get_int (_tmp0_, MINES_KEY_XSIZE);
	_tmp2_ = self->priv->settings;
	_tmp3_ = g_settings_get_int (_tmp2_, MINES_KEY_YSIZE);
	max_mines = (_tmp1_ * _tmp3_) - 10;
	_tmp4_ = self->priv->settings;
	_tmp5_ = g_settings_get_int (_tmp4_, MINES_KEY_NMINES);
	_tmp6_ = max_mines;
	if (_tmp5_ > _tmp6_) {
		GSettings* _tmp7_ = NULL;
		gint _tmp8_ = 0;
		GtkSpinButton* _tmp9_ = NULL;
		gint _tmp10_ = 0;
		_tmp7_ = self->priv->settings;
		_tmp8_ = max_mines;
		g_settings_set_int (_tmp7_, MINES_KEY_NMINES, _tmp8_);
		_tmp9_ = self->priv->n_mines_spin;
		_tmp10_ = max_mines;
		gtk_spin_button_set_value (_tmp9_, (gdouble) _tmp10_);
	}
	_tmp11_ = self->priv->n_mines_spin;
	_tmp12_ = max_mines;
	gtk_spin_button_set_range (_tmp11_, (gdouble) 1, (gdouble) _tmp12_);
}


static void mines_xsize_spin_cb (Mines* self, GtkSpinButton* spin) {
	gint xsize = 0;
	GtkSpinButton* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	GSettings* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	GSettings* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (spin != NULL);
	_tmp0_ = spin;
	_tmp1_ = gtk_spin_button_get_value_as_int (_tmp0_);
	xsize = _tmp1_;
	_tmp2_ = xsize;
	_tmp3_ = self->priv->settings;
	_tmp4_ = g_settings_get_int (_tmp3_, MINES_KEY_XSIZE);
	if (_tmp2_ == _tmp4_) {
		return;
	}
	_tmp5_ = self->priv->settings;
	_tmp6_ = xsize;
	g_settings_set_int (_tmp5_, MINES_KEY_XSIZE, _tmp6_);
	mines_set_n_mines_limit (self);
}


static void mines_ysize_spin_cb (Mines* self, GtkSpinButton* spin) {
	gint ysize = 0;
	GtkSpinButton* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	GSettings* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	GSettings* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (spin != NULL);
	_tmp0_ = spin;
	_tmp1_ = gtk_spin_button_get_value_as_int (_tmp0_);
	ysize = _tmp1_;
	_tmp2_ = ysize;
	_tmp3_ = self->priv->settings;
	_tmp4_ = g_settings_get_int (_tmp3_, MINES_KEY_YSIZE);
	if (_tmp2_ == _tmp4_) {
		return;
	}
	_tmp5_ = self->priv->settings;
	_tmp6_ = ysize;
	g_settings_set_int (_tmp5_, MINES_KEY_YSIZE, _tmp6_);
	mines_set_n_mines_limit (self);
}


static void mines_n_mines_spin_cb (Mines* self, GtkSpinButton* spin) {
	gint n_mines = 0;
	GtkSpinButton* _tmp0_ = NULL;
	gint _tmp1_ = 0;
	gint _tmp2_ = 0;
	GSettings* _tmp3_ = NULL;
	gint _tmp4_ = 0;
	GSettings* _tmp5_ = NULL;
	gint _tmp6_ = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (spin != NULL);
	_tmp0_ = spin;
	_tmp1_ = gtk_spin_button_get_value_as_int (_tmp0_);
	n_mines = _tmp1_;
	_tmp2_ = n_mines;
	_tmp3_ = self->priv->settings;
	_tmp4_ = g_settings_get_int (_tmp3_, MINES_KEY_NMINES);
	if (_tmp2_ == _tmp4_) {
		return;
	}
	_tmp5_ = self->priv->settings;
	_tmp6_ = n_mines;
	g_settings_set_int (_tmp5_, MINES_KEY_NMINES, _tmp6_);
}


static void mines_use_question_toggle_cb (Mines* self, GtkToggleButton* button) {
	gboolean use_question_marks = FALSE;
	GtkToggleButton* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	GSettings* _tmp2_ = NULL;
	MinefieldView* _tmp3_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	_tmp0_ = button;
	_tmp1_ = gtk_toggle_button_get_active (_tmp0_);
	use_question_marks = _tmp1_;
	_tmp2_ = self->priv->settings;
	g_settings_set_boolean (_tmp2_, MINES_KEY_USE_QUESTION_MARKS, use_question_marks);
	_tmp3_ = self->priv->minefield_view;
	minefield_view_set_use_question_marks (_tmp3_, use_question_marks);
}


static void mines_use_overmine_toggle_cb (Mines* self, GtkToggleButton* button) {
	gboolean use_overmine_warning = FALSE;
	GtkToggleButton* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	GSettings* _tmp2_ = NULL;
	MinefieldView* _tmp3_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	_tmp0_ = button;
	_tmp1_ = gtk_toggle_button_get_active (_tmp0_);
	use_overmine_warning = _tmp1_;
	_tmp2_ = self->priv->settings;
	g_settings_set_boolean (_tmp2_, MINES_KEY_USE_OVERMINE_WARNING, use_overmine_warning);
	_tmp3_ = self->priv->minefield_view;
	minefield_view_set_use_overmine_warning (_tmp3_, use_overmine_warning);
}


static void mines_use_number_border_toggle_cb (Mines* self, GtkToggleButton* button) {
	gboolean use_number_border = FALSE;
	GtkToggleButton* _tmp0_ = NULL;
	gboolean _tmp1_ = FALSE;
	GSettings* _tmp2_ = NULL;
	MinefieldView* _tmp3_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (button != NULL);
	_tmp0_ = button;
	_tmp1_ = gtk_toggle_button_get_active (_tmp0_);
	use_number_border = _tmp1_;
	_tmp2_ = self->priv->settings;
	g_settings_set_boolean (_tmp2_, MINES_KEY_USE_NUMBER_BORDER, use_number_border);
	_tmp3_ = self->priv->minefield_view;
	minefield_view_set_use_number_border (_tmp3_, use_number_border);
}


static void _mines_pref_response_cb_gtk_dialog_response (GtkDialog* _sender, gint response_id, gpointer self) {
	mines_pref_response_cb (self, _sender, response_id);
}


static gboolean _mines_pref_delete_event_cb_gtk_widget_delete_event (GtkWidget* _sender, GdkEventAny* event, gpointer self) {
	gboolean result;
	result = mines_pref_delete_event_cb (self, _sender, event);
	return result;
}


static void _mines_use_question_toggle_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self) {
	mines_use_question_toggle_cb (self, _sender);
}


static void _mines_use_overmine_toggle_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self) {
	mines_use_overmine_toggle_cb (self, _sender);
}


static void _mines_use_number_border_toggle_cb_gtk_toggle_button_toggled (GtkToggleButton* _sender, gpointer self) {
	mines_use_number_border_toggle_cb (self, _sender);
}


static GtkDialog* mines_create_preferences (Mines* self) {
	GtkDialog* result = NULL;
	GtkDialog* dialog = NULL;
	const gchar* _tmp0_ = NULL;
	GtkWindow* _tmp1_ = NULL;
	GtkDialog* _tmp2_ = NULL;
	GtkBox* box = NULL;
	GtkBox* _tmp3_ = NULL;
	GtkBox* _tmp4_ = NULL;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp5_ = NULL;
	GtkCheckButton* question_toggle = NULL;
	const gchar* _tmp6_ = NULL;
	GtkCheckButton* _tmp7_ = NULL;
	GSettings* _tmp8_ = NULL;
	gboolean _tmp9_ = FALSE;
	GtkCheckButton* overmine_toggle = NULL;
	const gchar* _tmp10_ = NULL;
	GtkCheckButton* _tmp11_ = NULL;
	GSettings* _tmp12_ = NULL;
	gboolean _tmp13_ = FALSE;
	GtkCheckButton* border_toggle = NULL;
	const gchar* _tmp14_ = NULL;
	GtkCheckButton* _tmp15_ = NULL;
	GSettings* _tmp16_ = NULL;
	gboolean _tmp17_ = FALSE;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = _ ("Mines Preferences");
	_tmp1_ = self->priv->window;
	_tmp2_ = (GtkDialog*) gtk_dialog_new_with_buttons (_tmp0_, _tmp1_, 0, GTK_STOCK_CLOSE, GTK_RESPONSE_CLOSE, NULL, NULL);
	g_object_ref_sink (_tmp2_);
	dialog = _tmp2_;
	g_signal_connect_object (dialog, "response", (GCallback) _mines_pref_response_cb_gtk_dialog_response, self, 0);
	g_signal_connect_object ((GtkWidget*) dialog, "delete-event", (GCallback) _mines_pref_delete_event_cb_gtk_widget_delete_event, self, 0);
	gtk_container_set_border_width ((GtkContainer*) dialog, (guint) 5);
	gtk_window_set_resizable ((GtkWindow*) dialog, FALSE);
	_tmp3_ = (GtkBox*) gtk_dialog_get_content_area (dialog);
	_tmp4_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, GTK_TYPE_BOX, GtkBox));
	box = _tmp4_;
	_tmp5_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp5_);
	grid = _tmp5_;
	gtk_widget_show ((GtkWidget*) grid);
	gtk_container_set_border_width ((GtkContainer*) grid, (guint) 6);
	gtk_grid_set_row_spacing (grid, (guint) 6);
	gtk_grid_set_column_spacing (grid, (guint) 18);
	gtk_container_add ((GtkContainer*) box, (GtkWidget*) grid);
	_tmp6_ = _ ("_Use \"I'm not sure\" flags");
	_tmp7_ = (GtkCheckButton*) gtk_check_button_new_with_mnemonic (_tmp6_);
	g_object_ref_sink (_tmp7_);
	question_toggle = _tmp7_;
	gtk_widget_show ((GtkWidget*) question_toggle);
	g_signal_connect_object ((GtkToggleButton*) question_toggle, "toggled", (GCallback) _mines_use_question_toggle_cb_gtk_toggle_button_toggled, self, 0);
	_tmp8_ = self->priv->settings;
	_tmp9_ = g_settings_get_boolean (_tmp8_, MINES_KEY_USE_QUESTION_MARKS);
	gtk_toggle_button_set_active ((GtkToggleButton*) question_toggle, _tmp9_);
	gtk_grid_attach (grid, (GtkWidget*) question_toggle, 0, 0, 1, 1);
	_tmp10_ = _ ("_Warn if too many flags have been placed");
	_tmp11_ = (GtkCheckButton*) gtk_check_button_new_with_mnemonic (_tmp10_);
	g_object_ref_sink (_tmp11_);
	overmine_toggle = _tmp11_;
	gtk_widget_show ((GtkWidget*) overmine_toggle);
	g_signal_connect_object ((GtkToggleButton*) overmine_toggle, "toggled", (GCallback) _mines_use_overmine_toggle_cb_gtk_toggle_button_toggled, self, 0);
	_tmp12_ = self->priv->settings;
	_tmp13_ = g_settings_get_boolean (_tmp12_, MINES_KEY_USE_OVERMINE_WARNING);
	gtk_toggle_button_set_active ((GtkToggleButton*) overmine_toggle, _tmp13_);
	gtk_grid_attach (grid, (GtkWidget*) overmine_toggle, 0, 1, 1, 1);
	_tmp14_ = _ ("_Display numbers with border");
	_tmp15_ = (GtkCheckButton*) gtk_check_button_new_with_mnemonic (_tmp14_);
	g_object_ref_sink (_tmp15_);
	border_toggle = _tmp15_;
	gtk_widget_show ((GtkWidget*) border_toggle);
	g_signal_connect_object ((GtkToggleButton*) border_toggle, "toggled", (GCallback) _mines_use_number_border_toggle_cb_gtk_toggle_button_toggled, self, 0);
	_tmp16_ = self->priv->settings;
	_tmp17_ = g_settings_get_boolean (_tmp16_, MINES_KEY_USE_NUMBER_BORDER);
	gtk_toggle_button_set_active ((GtkToggleButton*) border_toggle, _tmp17_);
	gtk_grid_attach (grid, (GtkWidget*) border_toggle, 0, 2, 1, 1);
	result = dialog;
	_g_object_unref0 (border_toggle);
	_g_object_unref0 (overmine_toggle);
	_g_object_unref0 (question_toggle);
	_g_object_unref0 (grid);
	_g_object_unref0 (box);
	return result;
}


static void mines_set_mode (Mines* self, gint mode) {
	gint _tmp0_ = 0;
	GSettings* _tmp1_ = NULL;
	gint _tmp2_ = 0;
	g_return_if_fail (self != NULL);
	_tmp0_ = mode;
	_tmp1_ = self->priv->settings;
	_tmp2_ = g_settings_get_int (_tmp1_, MINES_KEY_MODE);
	if (_tmp0_ != _tmp2_) {
		GSettings* _tmp3_ = NULL;
		gint _tmp4_ = 0;
		_tmp3_ = self->priv->settings;
		_tmp4_ = mode;
		g_settings_set_int (_tmp3_, MINES_KEY_MODE, _tmp4_);
	}
	mines_start_game (self);
}


static void mines_small_size_clicked_cb (Mines* self) {
	g_return_if_fail (self != NULL);
	mines_set_mode (self, 0);
}


static void mines_medium_size_clicked_cb (Mines* self) {
	g_return_if_fail (self != NULL);
	mines_set_mode (self, 1);
}


static void mines_large_size_clicked_cb (Mines* self) {
	g_return_if_fail (self != NULL);
	mines_set_mode (self, 2);
}


static void mines_custom_size_clicked_cb (Mines* self) {
	g_return_if_fail (self != NULL);
	mines_set_mode (self, 3);
}


static void mines_pref_response_cb (Mines* self, GtkDialog* dialog, gint response_id) {
	GtkDialog* _tmp0_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (dialog != NULL);
	_tmp0_ = self->priv->pref_dialog;
	gtk_widget_hide ((GtkWidget*) _tmp0_);
}


static gboolean mines_pref_delete_event_cb (Mines* self, GtkWidget* widget, GdkEventAny* event) {
	gboolean result = FALSE;
	GtkDialog* _tmp0_ = NULL;
	g_return_val_if_fail (self != NULL, FALSE);
	g_return_val_if_fail (widget != NULL, FALSE);
	g_return_val_if_fail (event != NULL, FALSE);
	_tmp0_ = self->priv->pref_dialog;
	gtk_widget_hide ((GtkWidget*) _tmp0_);
	result = TRUE;
	return result;
}


static void mines_preferences_cb (Mines* self) {
	GtkDialog* _tmp0_ = NULL;
	GtkDialog* _tmp2_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->pref_dialog;
	if (_tmp0_ == NULL) {
		GtkDialog* _tmp1_ = NULL;
		_tmp1_ = mines_create_preferences (self);
		_g_object_unref0 (self->priv->pref_dialog);
		self->priv->pref_dialog = _tmp1_;
	}
	_tmp2_ = self->priv->pref_dialog;
	gtk_window_present ((GtkWindow*) _tmp2_);
}


static void mines_help_cb (Mines* self) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	{
		GtkWindow* _tmp0_ = NULL;
		GdkScreen* _tmp1_ = NULL;
		guint32 _tmp2_ = 0U;
		_tmp0_ = self->priv->window;
		_tmp1_ = gtk_window_get_screen (_tmp0_);
		_tmp2_ = gtk_get_current_event_time ();
		gtk_show_uri (_tmp1_, "help:gnome-mines", _tmp2_, &_inner_error_);
		if (_inner_error_ != NULL) {
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		GError* _tmp3_ = NULL;
		const gchar* _tmp4_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp3_ = e;
		_tmp4_ = _tmp3_->message;
		g_warning ("gnome-mines.vala:987: Failed to show help: %s", _tmp4_);
		_g_error_free0 (e);
	}
	__finally0:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
}


gint mines_main (gchar** args, int args_length1) {
	gint result = 0;
	GOptionContext* context = NULL;
	GOptionContext* _tmp0_ = NULL;
	GOptionContext* _tmp1_ = NULL;
	GOptionContext* _tmp2_ = NULL;
	GOptionGroup* _tmp3_ = NULL;
	Mines* app = NULL;
	Mines* _tmp8_ = NULL;
	Mines* _tmp9_ = NULL;
	gint _tmp10_ = 0;
	GError * _inner_error_ = NULL;
	setlocale (LC_ALL, "");
	bindtextdomain (GETTEXT_PACKAGE, LOCALEDIR);
	bind_textdomain_codeset (GETTEXT_PACKAGE, "UTF-8");
	textdomain (GETTEXT_PACKAGE);
	g_set_prgname ("gnomine");
	_tmp0_ = g_option_context_new (NULL);
	context = _tmp0_;
	_tmp1_ = context;
	g_option_context_set_translation_domain (_tmp1_, GETTEXT_PACKAGE);
	_tmp2_ = context;
	_tmp3_ = gtk_get_option_group (TRUE);
	g_option_context_add_group (_tmp2_, _tmp3_);
	{
		GOptionContext* _tmp4_ = NULL;
		_tmp4_ = context;
		g_option_context_parse (_tmp4_, &args_length1, &args, &_inner_error_);
		if (_inner_error_ != NULL) {
			goto __catch1_g_error;
		}
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* e = NULL;
		FILE* _tmp5_ = NULL;
		GError* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp5_ = stderr;
		_tmp6_ = e;
		_tmp7_ = _tmp6_->message;
		fprintf (_tmp5_, "%s\n", _tmp7_);
		result = EXIT_FAILURE;
		_g_error_free0 (e);
		_g_option_context_free0 (context);
		return result;
	}
	__finally1:
	if (_inner_error_ != NULL) {
		_g_option_context_free0 (context);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return 0;
	}
	_tmp8_ = mines_new ();
	app = _tmp8_;
	_tmp9_ = app;
	_tmp10_ = g_application_run ((GApplication*) _tmp9_, 0, NULL);
	result = _tmp10_;
	_g_object_unref0 (app);
	_g_option_context_free0 (context);
	return result;
}


int main (int argc, char ** argv) {
	g_type_init ();
	return mines_main (argv, argc);
}


static void mines_class_init (MinesClass * klass) {
	mines_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (MinesPrivate));
	G_APPLICATION_CLASS (klass)->startup = mines_real_startup;
	G_APPLICATION_CLASS (klass)->shutdown = mines_real_shutdown;
	G_APPLICATION_CLASS (klass)->activate = mines_real_activate;
	G_OBJECT_CLASS (klass)->finalize = mines_finalize;
}


static void mines_instance_init (Mines * self) {
	self->priv = MINES_GET_PRIVATE (self);
	self->priv->pref_dialog = NULL;
}


static void mines_finalize (GObject* obj) {
	Mines * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_MINES, Mines);
	_g_object_unref0 (self->priv->settings);
	_g_object_unref0 (self->priv->face_button);
	_g_object_unref0 (self->priv->win_face_image);
	_g_object_unref0 (self->priv->sad_face_image);
	_g_object_unref0 (self->priv->smile_face_image);
	_g_object_unref0 (self->priv->cool_face_image);
	_g_object_unref0 (self->priv->worried_face_image);
	_g_object_unref0 (self->priv->fullscreen_button);
	_g_object_unref0 (self->priv->pause_button);
	_g_object_unref0 (self->priv->app_main_menu);
	_g_object_unref0 (self->priv->window);
	_history_unref0 (self->priv->history);
	_minefield_unref0 (self->priv->minefield);
	_g_object_unref0 (self->priv->minefield_view);
	_g_object_unref0 (self->priv->pref_dialog);
	_g_object_unref0 (self->priv->flag_label);
	_g_object_unref0 (self->priv->n_mines_spin);
	_g_object_unref0 (self->priv->clock_label);
	_g_object_unref0 (self->priv->new_game_action);
	_g_object_unref0 (self->priv->repeat_size_action);
	_g_object_unref0 (self->priv->pause_action);
	_g_object_unref0 (self->priv->hint_action);
	_g_object_unref0 (self->priv->auto_play_action);
	_g_object_unref0 (self->priv->new_game_screen);
	_g_object_unref0 (self->priv->custom_game_screen);
	G_OBJECT_CLASS (mines_parent_class)->finalize (obj);
}


GType mines_get_type (void) {
	static volatile gsize mines_type_id__volatile = 0;
	if (g_once_init_enter (&mines_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MinesClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) mines_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (Mines), 0, (GInstanceInitFunc) mines_instance_init, NULL };
		GType mines_type_id;
		mines_type_id = g_type_register_static (GTK_TYPE_APPLICATION, "Mines", &g_define_type_info, 0);
		g_once_init_leave (&mines_type_id__volatile, mines_type_id);
	}
	return mines_type_id__volatile;
}


static gpointer _history_ref0 (gpointer self) {
	return self ? history_ref (self) : NULL;
}


static void _score_dialog_entry_added_cb_history_entry_added (History* _sender, HistoryEntry* entry, gpointer self) {
	score_dialog_entry_added_cb (self, entry);
}


static gpointer _history_entry_ref0 (gpointer self) {
	return self ? history_entry_ref (self) : NULL;
}


static void _score_dialog_size_changed_cb_gtk_combo_box_changed (GtkComboBox* _sender, gpointer self) {
	score_dialog_size_changed_cb (self, _sender);
}


ScoreDialog* score_dialog_construct (GType object_type, History* history, HistoryEntry* selected_entry, gboolean show_quit) {
	ScoreDialog * self = NULL;
	History* _tmp0_ = NULL;
	History* _tmp1_ = NULL;
	History* _tmp2_ = NULL;
	HistoryEntry* _tmp3_ = NULL;
	HistoryEntry* _tmp4_ = NULL;
	gboolean _tmp5_ = FALSE;
	GtkBox* vbox = NULL;
	GtkBox* _tmp10_ = NULL;
	GtkBox* _tmp11_ = NULL;
	GtkBox* _tmp12_ = NULL;
	GtkBox* _tmp13_ = NULL;
	GtkBox* _tmp14_ = NULL;
	GtkBox* hbox = NULL;
	GtkBox* _tmp15_ = NULL;
	GtkBox* _tmp16_ = NULL;
	GtkBox* _tmp17_ = NULL;
	GtkBox* _tmp18_ = NULL;
	GtkLabel* label = NULL;
	const gchar* _tmp19_ = NULL;
	GtkLabel* _tmp20_ = NULL;
	GtkLabel* _tmp21_ = NULL;
	GtkBox* _tmp22_ = NULL;
	GtkLabel* _tmp23_ = NULL;
	GtkListStore* _tmp24_ = NULL;
	GtkComboBox* _tmp25_ = NULL;
	GtkComboBox* _tmp26_ = NULL;
	GtkComboBox* _tmp27_ = NULL;
	GtkListStore* _tmp28_ = NULL;
	GtkCellRendererText* renderer = NULL;
	GtkCellRendererText* _tmp29_ = NULL;
	GtkComboBox* _tmp30_ = NULL;
	GtkCellRendererText* _tmp31_ = NULL;
	GtkComboBox* _tmp32_ = NULL;
	GtkCellRendererText* _tmp33_ = NULL;
	GtkComboBox* _tmp34_ = NULL;
	GtkBox* _tmp35_ = NULL;
	GtkComboBox* _tmp36_ = NULL;
	GtkScrolledWindow* scroll = NULL;
	GtkScrolledWindow* _tmp37_ = NULL;
	GtkScrolledWindow* _tmp38_ = NULL;
	GtkScrolledWindow* _tmp39_ = NULL;
	GtkScrolledWindow* _tmp40_ = NULL;
	GtkBox* _tmp41_ = NULL;
	GtkScrolledWindow* _tmp42_ = NULL;
	GtkListStore* _tmp43_ = NULL;
	GtkTreeView* scores = NULL;
	GtkTreeView* _tmp44_ = NULL;
	GtkCellRendererText* _tmp45_ = NULL;
	GtkTreeView* _tmp46_ = NULL;
	const gchar* _tmp47_ = NULL;
	GtkCellRendererText* _tmp48_ = NULL;
	GtkCellRendererText* _tmp49_ = NULL;
	GtkCellRendererText* _tmp50_ = NULL;
	GtkTreeView* _tmp51_ = NULL;
	const gchar* _tmp52_ = NULL;
	GtkCellRendererText* _tmp53_ = NULL;
	GtkTreeView* _tmp54_ = NULL;
	GtkListStore* _tmp55_ = NULL;
	GtkTreeView* _tmp56_ = NULL;
	GtkScrolledWindow* _tmp57_ = NULL;
	GtkTreeView* _tmp58_ = NULL;
	History* _tmp59_ = NULL;
	GList* _tmp60_ = NULL;
	GtkTreeIter iter = {0};
	gint width = 0;
	gint height = 0;
	gint n_mines = 0;
	guint wins = 0U;
	guint loses = 0U;
	guint total = 0U;
	gdouble percentage = 0.0;
	GtkComboBox* _tmp63_ = NULL;
	GtkTreeIter _tmp64_ = {0};
	gboolean _tmp65_ = FALSE;
	const gchar* _tmp85_ = NULL;
	guint _tmp86_ = 0U;
	gchar* _tmp87_ = NULL;
	gchar* _tmp88_ = NULL;
	GtkLabel* _tmp89_ = NULL;
	GtkLabel* _tmp90_ = NULL;
	GtkBox* _tmp91_ = NULL;
	GtkLabel* _tmp92_ = NULL;
	const gchar* _tmp93_ = NULL;
	guint _tmp94_ = 0U;
	gchar* _tmp95_ = NULL;
	gchar* _tmp96_ = NULL;
	GtkLabel* _tmp97_ = NULL;
	GtkLabel* _tmp98_ = NULL;
	GtkBox* _tmp99_ = NULL;
	GtkLabel* _tmp100_ = NULL;
	const gchar* _tmp101_ = NULL;
	guint _tmp102_ = 0U;
	gchar* _tmp103_ = NULL;
	gchar* _tmp104_ = NULL;
	GtkLabel* _tmp105_ = NULL;
	GtkLabel* _tmp106_ = NULL;
	GtkBox* _tmp107_ = NULL;
	GtkLabel* _tmp108_ = NULL;
	const gchar* _tmp109_ = NULL;
	gdouble _tmp110_ = 0.0;
	gchar* _tmp111_ = NULL;
	gchar* _tmp112_ = NULL;
	GtkLabel* _tmp113_ = NULL;
	GtkLabel* _tmp114_ = NULL;
	GtkBox* _tmp115_ = NULL;
	GtkLabel* _tmp116_ = NULL;
	g_return_val_if_fail (history != NULL, NULL);
	self = (ScoreDialog*) g_object_new (object_type, NULL);
	_tmp0_ = history;
	_tmp1_ = _history_ref0 (_tmp0_);
	_history_unref0 (self->priv->history);
	self->priv->history = _tmp1_;
	_tmp2_ = history;
	g_signal_connect_object (_tmp2_, "entry-added", (GCallback) _score_dialog_entry_added_cb_history_entry_added, self, 0);
	_tmp3_ = selected_entry;
	_tmp4_ = _history_entry_ref0 (_tmp3_);
	_history_entry_unref0 (self->priv->selected_entry);
	self->priv->selected_entry = _tmp4_;
	_tmp5_ = show_quit;
	if (_tmp5_) {
		GtkWidget* button = NULL;
		const gchar* _tmp6_ = NULL;
		GtkWidget* _tmp7_ = NULL;
		GtkWidget* _tmp8_ = NULL;
		GtkWidget* _tmp9_ = NULL;
		gtk_dialog_add_button ((GtkDialog*) self, GTK_STOCK_QUIT, (gint) GTK_RESPONSE_CLOSE);
		_tmp6_ = _ ("New Game");
		_tmp7_ = gtk_dialog_add_button ((GtkDialog*) self, _tmp6_, (gint) GTK_RESPONSE_OK);
		_tmp8_ = _g_object_ref0 (_tmp7_);
		button = _tmp8_;
		_tmp9_ = button;
		g_object_set (_tmp9_, "has-focus", TRUE, NULL);
		_g_object_unref0 (button);
	} else {
		gtk_dialog_add_button ((GtkDialog*) self, GTK_STOCK_OK, (gint) GTK_RESPONSE_DELETE_EVENT);
	}
	gtk_widget_set_size_request ((GtkWidget*) self, 200, 300);
	_tmp10_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 5);
	g_object_ref_sink (_tmp10_);
	vbox = _tmp10_;
	_tmp11_ = vbox;
	gtk_container_set_border_width ((GtkContainer*) _tmp11_, (guint) 6);
	_tmp12_ = vbox;
	gtk_widget_show ((GtkWidget*) _tmp12_);
	_tmp13_ = (GtkBox*) gtk_dialog_get_content_area ((GtkDialog*) self);
	_tmp14_ = vbox;
	gtk_box_pack_start (_tmp13_, (GtkWidget*) _tmp14_, TRUE, TRUE, (guint) 0);
	_tmp15_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 6);
	g_object_ref_sink (_tmp15_);
	hbox = _tmp15_;
	_tmp16_ = hbox;
	gtk_widget_show ((GtkWidget*) _tmp16_);
	_tmp17_ = vbox;
	_tmp18_ = hbox;
	gtk_box_pack_start (_tmp17_, (GtkWidget*) _tmp18_, FALSE, FALSE, (guint) 0);
	_tmp19_ = _ ("Size:");
	_tmp20_ = (GtkLabel*) gtk_label_new (_tmp19_);
	g_object_ref_sink (_tmp20_);
	label = _tmp20_;
	_tmp21_ = label;
	gtk_widget_show ((GtkWidget*) _tmp21_);
	_tmp22_ = hbox;
	_tmp23_ = label;
	gtk_box_pack_start (_tmp22_, (GtkWidget*) _tmp23_, FALSE, FALSE, (guint) 0);
	_tmp24_ = gtk_list_store_new (4, G_TYPE_STRING, G_TYPE_INT, G_TYPE_INT, G_TYPE_INT);
	_g_object_unref0 (self->priv->size_model);
	self->priv->size_model = _tmp24_;
	_tmp25_ = (GtkComboBox*) gtk_combo_box_new ();
	g_object_ref_sink (_tmp25_);
	_g_object_unref0 (self->priv->size_combo);
	self->priv->size_combo = _tmp25_;
	_tmp26_ = self->priv->size_combo;
	g_signal_connect_object (_tmp26_, "changed", (GCallback) _score_dialog_size_changed_cb_gtk_combo_box_changed, self, 0);
	_tmp27_ = self->priv->size_combo;
	_tmp28_ = self->priv->size_model;
	gtk_combo_box_set_model (_tmp27_, (GtkTreeModel*) _tmp28_);
	_tmp29_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
	g_object_ref_sink (_tmp29_);
	renderer = _tmp29_;
	_tmp30_ = self->priv->size_combo;
	_tmp31_ = renderer;
	gtk_cell_layout_pack_start ((GtkCellLayout*) _tmp30_, (GtkCellRenderer*) _tmp31_, TRUE);
	_tmp32_ = self->priv->size_combo;
	_tmp33_ = renderer;
	gtk_cell_layout_add_attribute ((GtkCellLayout*) _tmp32_, (GtkCellRenderer*) _tmp33_, "text", 0);
	_tmp34_ = self->priv->size_combo;
	gtk_widget_show ((GtkWidget*) _tmp34_);
	_tmp35_ = hbox;
	_tmp36_ = self->priv->size_combo;
	gtk_box_pack_start (_tmp35_, (GtkWidget*) _tmp36_, TRUE, TRUE, (guint) 0);
	_tmp37_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp37_);
	scroll = _tmp37_;
	_tmp38_ = scroll;
	gtk_scrolled_window_set_shadow_type (_tmp38_, GTK_SHADOW_ETCHED_IN);
	_tmp39_ = scroll;
	gtk_scrolled_window_set_policy (_tmp39_, GTK_POLICY_NEVER, GTK_POLICY_AUTOMATIC);
	_tmp40_ = scroll;
	gtk_widget_show ((GtkWidget*) _tmp40_);
	_tmp41_ = vbox;
	_tmp42_ = scroll;
	gtk_box_pack_start (_tmp41_, (GtkWidget*) _tmp42_, TRUE, TRUE, (guint) 0);
	_tmp43_ = gtk_list_store_new (3, G_TYPE_STRING, G_TYPE_STRING, G_TYPE_INT);
	_g_object_unref0 (self->priv->score_model);
	self->priv->score_model = _tmp43_;
	_tmp44_ = (GtkTreeView*) gtk_tree_view_new ();
	g_object_ref_sink (_tmp44_);
	scores = _tmp44_;
	_tmp45_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
	g_object_ref_sink (_tmp45_);
	_g_object_unref0 (renderer);
	renderer = _tmp45_;
	_tmp46_ = scores;
	_tmp47_ = _ ("Date");
	_tmp48_ = renderer;
	gtk_tree_view_insert_column_with_attributes (_tmp46_, -1, _tmp47_, (GtkCellRenderer*) _tmp48_, "text", 0, "weight", 2, NULL);
	_tmp49_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
	g_object_ref_sink (_tmp49_);
	_g_object_unref0 (renderer);
	renderer = _tmp49_;
	_tmp50_ = renderer;
	g_object_set ((GtkCellRenderer*) _tmp50_, "xalign", 1.0f, NULL);
	_tmp51_ = scores;
	_tmp52_ = _ ("Time");
	_tmp53_ = renderer;
	gtk_tree_view_insert_column_with_attributes (_tmp51_, -1, _tmp52_, (GtkCellRenderer*) _tmp53_, "text", 1, "weight", 2, NULL);
	_tmp54_ = scores;
	_tmp55_ = self->priv->score_model;
	gtk_tree_view_set_model (_tmp54_, (GtkTreeModel*) _tmp55_);
	_tmp56_ = scores;
	gtk_widget_show ((GtkWidget*) _tmp56_);
	_tmp57_ = scroll;
	_tmp58_ = scores;
	gtk_container_add ((GtkContainer*) _tmp57_, (GtkWidget*) _tmp58_);
	_tmp59_ = history;
	_tmp60_ = _tmp59_->entries;
	{
		GList* entry_collection = NULL;
		GList* entry_it = NULL;
		entry_collection = _tmp60_;
		for (entry_it = entry_collection; entry_it != NULL; entry_it = entry_it->next) {
			HistoryEntry* _tmp61_ = NULL;
			HistoryEntry* entry = NULL;
			_tmp61_ = _history_entry_ref0 ((HistoryEntry*) entry_it->data);
			entry = _tmp61_;
			{
				HistoryEntry* _tmp62_ = NULL;
				_tmp62_ = entry;
				score_dialog_entry_added_cb (self, _tmp62_);
				_history_entry_unref0 (entry);
			}
		}
	}
	wins = (guint) 0;
	loses = (guint) 0;
	total = (guint) 0;
	percentage = 0.0;
	_tmp63_ = self->priv->size_combo;
	_tmp65_ = gtk_combo_box_get_active_iter (_tmp63_, &_tmp64_);
	iter = _tmp64_;
	if (_tmp65_) {
		GtkComboBox* _tmp66_ = NULL;
		GtkTreeModel* _tmp67_ = NULL;
		GtkTreeModel* _tmp68_ = NULL;
		GtkTreeIter _tmp69_ = {0};
		StatEntry* stat = NULL;
		History* _tmp70_ = NULL;
		gint _tmp71_ = 0;
		gint _tmp72_ = 0;
		gint _tmp73_ = 0;
		StatEntry* _tmp74_ = NULL;
		StatEntry* _tmp75_ = NULL;
		_tmp66_ = self->priv->size_combo;
		_tmp67_ = gtk_combo_box_get_model (_tmp66_);
		_tmp68_ = _tmp67_;
		_tmp69_ = iter;
		gtk_tree_model_get (_tmp68_, &_tmp69_, 1, &width, 2, &height, 3, &n_mines, -1);
		_tmp70_ = history;
		_tmp71_ = width;
		_tmp72_ = height;
		_tmp73_ = n_mines;
		_tmp74_ = history_find_stat (_tmp70_, (guint) _tmp71_, (guint) _tmp72_, (guint) _tmp73_);
		stat = _tmp74_;
		_tmp75_ = stat;
		if (_tmp75_ != NULL) {
			StatEntry* _tmp76_ = NULL;
			guint _tmp77_ = 0U;
			StatEntry* _tmp78_ = NULL;
			guint _tmp79_ = 0U;
			guint _tmp80_ = 0U;
			guint _tmp81_ = 0U;
			guint _tmp82_ = 0U;
			_tmp76_ = stat;
			_tmp77_ = _tmp76_->wins;
			wins = _tmp77_;
			_tmp78_ = stat;
			_tmp79_ = _tmp78_->loses;
			loses = _tmp79_;
			_tmp80_ = wins;
			_tmp81_ = loses;
			total = _tmp80_ + _tmp81_;
			_tmp82_ = total;
			if (_tmp82_ > ((guint) 0)) {
				guint _tmp83_ = 0U;
				guint _tmp84_ = 0U;
				_tmp83_ = wins;
				_tmp84_ = total;
				percentage = (_tmp83_ * 100) / ((gdouble) _tmp84_);
			}
		}
		_stat_entry_unref0 (stat);
	}
	_tmp85_ = _ ("Wins");
	_tmp86_ = wins;
	_tmp87_ = g_strdup_printf ("%s: %u", _tmp85_, _tmp86_);
	_tmp88_ = _tmp87_;
	_tmp89_ = (GtkLabel*) gtk_label_new (_tmp88_);
	g_object_ref_sink (_tmp89_);
	_g_object_unref0 (self->priv->wins_label);
	self->priv->wins_label = _tmp89_;
	_g_free0 (_tmp88_);
	_tmp90_ = self->priv->wins_label;
	gtk_widget_show ((GtkWidget*) _tmp90_);
	_tmp91_ = vbox;
	_tmp92_ = self->priv->wins_label;
	gtk_box_pack_start (_tmp91_, (GtkWidget*) _tmp92_, FALSE, FALSE, (guint) 0);
	_tmp93_ = _ ("Loses");
	_tmp94_ = loses;
	_tmp95_ = g_strdup_printf ("%s: %u", _tmp93_, _tmp94_);
	_tmp96_ = _tmp95_;
	_tmp97_ = (GtkLabel*) gtk_label_new (_tmp96_);
	g_object_ref_sink (_tmp97_);
	_g_object_unref0 (self->priv->loses_label);
	self->priv->loses_label = _tmp97_;
	_g_free0 (_tmp96_);
	_tmp98_ = self->priv->loses_label;
	gtk_widget_show ((GtkWidget*) _tmp98_);
	_tmp99_ = vbox;
	_tmp100_ = self->priv->loses_label;
	gtk_box_pack_start (_tmp99_, (GtkWidget*) _tmp100_, FALSE, FALSE, (guint) 0);
	_tmp101_ = _ ("Total");
	_tmp102_ = total;
	_tmp103_ = g_strdup_printf ("%s: %u", _tmp101_, _tmp102_);
	_tmp104_ = _tmp103_;
	_tmp105_ = (GtkLabel*) gtk_label_new (_tmp104_);
	g_object_ref_sink (_tmp105_);
	_g_object_unref0 (self->priv->total_label);
	self->priv->total_label = _tmp105_;
	_g_free0 (_tmp104_);
	_tmp106_ = self->priv->total_label;
	gtk_widget_show ((GtkWidget*) _tmp106_);
	_tmp107_ = vbox;
	_tmp108_ = self->priv->total_label;
	gtk_box_pack_start (_tmp107_, (GtkWidget*) _tmp108_, FALSE, FALSE, (guint) 0);
	_tmp109_ = _ ("Percentage");
	_tmp110_ = percentage;
	_tmp111_ = g_strdup_printf ("%s: %.2f%%", _tmp109_, _tmp110_);
	_tmp112_ = _tmp111_;
	_tmp113_ = (GtkLabel*) gtk_label_new (_tmp112_);
	g_object_ref_sink (_tmp113_);
	_g_object_unref0 (self->priv->percentage_label);
	self->priv->percentage_label = _tmp113_;
	_g_free0 (_tmp112_);
	_tmp114_ = self->priv->percentage_label;
	gtk_widget_show ((GtkWidget*) _tmp114_);
	_tmp115_ = vbox;
	_tmp116_ = self->priv->percentage_label;
	gtk_box_pack_start (_tmp115_, (GtkWidget*) _tmp116_, FALSE, FALSE, (guint) 0);
	_g_object_unref0 (scores);
	_g_object_unref0 (scroll);
	_g_object_unref0 (renderer);
	_g_object_unref0 (label);
	_g_object_unref0 (hbox);
	_g_object_unref0 (vbox);
	return self;
}


ScoreDialog* score_dialog_new (History* history, HistoryEntry* selected_entry, gboolean show_quit) {
	return score_dialog_construct (TYPE_SCORE_DIALOG, history, selected_entry, show_quit);
}


static gint _score_dialog_compare_entries_gcompare_func (gconstpointer a, gconstpointer b) {
	gint result;
	result = score_dialog_compare_entries (a, b);
	return result;
}


void score_dialog_set_size (ScoreDialog* self, guint width, guint height, guint n_mines) {
	GtkListStore* _tmp0_ = NULL;
	GList* entries = NULL;
	History* _tmp1_ = NULL;
	GList* _tmp2_ = NULL;
	GList* _tmp3_ = NULL;
	GList* _tmp4_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->score_model;
	gtk_list_store_clear (_tmp0_);
	_tmp1_ = self->priv->history;
	_tmp2_ = _tmp1_->entries;
	_tmp3_ = g_list_copy (_tmp2_);
	entries = _tmp3_;
	entries = g_list_sort (entries, _score_dialog_compare_entries_gcompare_func);
	_tmp4_ = entries;
	{
		GList* entry_collection = NULL;
		GList* entry_it = NULL;
		entry_collection = _tmp4_;
		for (entry_it = entry_collection; entry_it != NULL; entry_it = entry_it->next) {
			HistoryEntry* entry = NULL;
			entry = (HistoryEntry*) entry_it->data;
			{
				gboolean _tmp5_ = FALSE;
				gboolean _tmp6_ = FALSE;
				HistoryEntry* _tmp7_ = NULL;
				guint _tmp8_ = 0U;
				guint _tmp9_ = 0U;
				gboolean _tmp13_ = FALSE;
				gboolean _tmp17_ = FALSE;
				gchar* date_label = NULL;
				HistoryEntry* _tmp18_ = NULL;
				GDateTime* _tmp19_ = NULL;
				gchar* _tmp20_ = NULL;
				gchar* time_label = NULL;
				HistoryEntry* _tmp21_ = NULL;
				guint _tmp22_ = 0U;
				gchar* _tmp23_ = NULL;
				HistoryEntry* _tmp24_ = NULL;
				guint _tmp25_ = 0U;
				gint weight = 0;
				HistoryEntry* _tmp31_ = NULL;
				HistoryEntry* _tmp32_ = NULL;
				GtkTreeIter iter = {0};
				GtkListStore* _tmp33_ = NULL;
				GtkTreeIter _tmp34_ = {0};
				GtkListStore* _tmp35_ = NULL;
				GtkTreeIter _tmp36_ = {0};
				const gchar* _tmp37_ = NULL;
				const gchar* _tmp38_ = NULL;
				gint _tmp39_ = 0;
				_tmp7_ = entry;
				_tmp8_ = _tmp7_->width;
				_tmp9_ = width;
				if (_tmp8_ != _tmp9_) {
					_tmp6_ = TRUE;
				} else {
					HistoryEntry* _tmp10_ = NULL;
					guint _tmp11_ = 0U;
					guint _tmp12_ = 0U;
					_tmp10_ = entry;
					_tmp11_ = _tmp10_->height;
					_tmp12_ = height;
					_tmp6_ = _tmp11_ != _tmp12_;
				}
				_tmp13_ = _tmp6_;
				if (_tmp13_) {
					_tmp5_ = TRUE;
				} else {
					HistoryEntry* _tmp14_ = NULL;
					guint _tmp15_ = 0U;
					guint _tmp16_ = 0U;
					_tmp14_ = entry;
					_tmp15_ = _tmp14_->n_mines;
					_tmp16_ = n_mines;
					_tmp5_ = _tmp15_ != _tmp16_;
				}
				_tmp17_ = _tmp5_;
				if (_tmp17_) {
					continue;
				}
				_tmp18_ = entry;
				_tmp19_ = _tmp18_->date;
				_tmp20_ = g_date_time_format (_tmp19_, "%d/%m/%Y");
				date_label = _tmp20_;
				_tmp21_ = entry;
				_tmp22_ = _tmp21_->duration;
				_tmp23_ = g_strdup_printf ("%us", _tmp22_);
				time_label = _tmp23_;
				_tmp24_ = entry;
				_tmp25_ = _tmp24_->duration;
				if (_tmp25_ >= ((guint) 60)) {
					HistoryEntry* _tmp26_ = NULL;
					guint _tmp27_ = 0U;
					HistoryEntry* _tmp28_ = NULL;
					guint _tmp29_ = 0U;
					gchar* _tmp30_ = NULL;
					_tmp26_ = entry;
					_tmp27_ = _tmp26_->duration;
					_tmp28_ = entry;
					_tmp29_ = _tmp28_->duration;
					_tmp30_ = g_strdup_printf ("%um %us", _tmp27_ / 60, _tmp29_ % 60);
					_g_free0 (time_label);
					time_label = _tmp30_;
				}
				weight = (gint) PANGO_WEIGHT_NORMAL;
				_tmp31_ = entry;
				_tmp32_ = self->priv->selected_entry;
				if (_tmp31_ == _tmp32_) {
					weight = (gint) PANGO_WEIGHT_BOLD;
				}
				_tmp33_ = self->priv->score_model;
				gtk_list_store_append (_tmp33_, &_tmp34_);
				iter = _tmp34_;
				_tmp35_ = self->priv->score_model;
				_tmp36_ = iter;
				_tmp37_ = date_label;
				_tmp38_ = time_label;
				_tmp39_ = weight;
				gtk_list_store_set (_tmp35_, &_tmp36_, 0, _tmp37_, 1, _tmp38_, 2, _tmp39_, -1);
				_g_free0 (time_label);
				_g_free0 (date_label);
			}
		}
	}
	_g_list_free0 (entries);
}


static gint score_dialog_compare_entries (HistoryEntry* a, HistoryEntry* b) {
	gint result = 0;
	HistoryEntry* _tmp0_ = NULL;
	guint _tmp1_ = 0U;
	HistoryEntry* _tmp2_ = NULL;
	guint _tmp3_ = 0U;
	HistoryEntry* _tmp8_ = NULL;
	guint _tmp9_ = 0U;
	HistoryEntry* _tmp10_ = NULL;
	guint _tmp11_ = 0U;
	HistoryEntry* _tmp16_ = NULL;
	guint _tmp17_ = 0U;
	HistoryEntry* _tmp18_ = NULL;
	guint _tmp19_ = 0U;
	HistoryEntry* _tmp24_ = NULL;
	guint _tmp25_ = 0U;
	HistoryEntry* _tmp26_ = NULL;
	guint _tmp27_ = 0U;
	HistoryEntry* _tmp32_ = NULL;
	GDateTime* _tmp33_ = NULL;
	HistoryEntry* _tmp34_ = NULL;
	GDateTime* _tmp35_ = NULL;
	gint _tmp36_ = 0;
	g_return_val_if_fail (a != NULL, 0);
	g_return_val_if_fail (b != NULL, 0);
	_tmp0_ = a;
	_tmp1_ = _tmp0_->width;
	_tmp2_ = b;
	_tmp3_ = _tmp2_->width;
	if (_tmp1_ != _tmp3_) {
		HistoryEntry* _tmp4_ = NULL;
		guint _tmp5_ = 0U;
		HistoryEntry* _tmp6_ = NULL;
		guint _tmp7_ = 0U;
		_tmp4_ = a;
		_tmp5_ = _tmp4_->width;
		_tmp6_ = b;
		_tmp7_ = _tmp6_->width;
		result = ((gint) _tmp5_) - ((gint) _tmp7_);
		return result;
	}
	_tmp8_ = a;
	_tmp9_ = _tmp8_->height;
	_tmp10_ = b;
	_tmp11_ = _tmp10_->height;
	if (_tmp9_ != _tmp11_) {
		HistoryEntry* _tmp12_ = NULL;
		guint _tmp13_ = 0U;
		HistoryEntry* _tmp14_ = NULL;
		guint _tmp15_ = 0U;
		_tmp12_ = a;
		_tmp13_ = _tmp12_->height;
		_tmp14_ = b;
		_tmp15_ = _tmp14_->height;
		result = ((gint) _tmp13_) - ((gint) _tmp15_);
		return result;
	}
	_tmp16_ = a;
	_tmp17_ = _tmp16_->n_mines;
	_tmp18_ = b;
	_tmp19_ = _tmp18_->n_mines;
	if (_tmp17_ != _tmp19_) {
		HistoryEntry* _tmp20_ = NULL;
		guint _tmp21_ = 0U;
		HistoryEntry* _tmp22_ = NULL;
		guint _tmp23_ = 0U;
		_tmp20_ = a;
		_tmp21_ = _tmp20_->n_mines;
		_tmp22_ = b;
		_tmp23_ = _tmp22_->n_mines;
		result = ((gint) _tmp21_) - ((gint) _tmp23_);
		return result;
	}
	_tmp24_ = a;
	_tmp25_ = _tmp24_->duration;
	_tmp26_ = b;
	_tmp27_ = _tmp26_->duration;
	if (_tmp25_ != _tmp27_) {
		HistoryEntry* _tmp28_ = NULL;
		guint _tmp29_ = 0U;
		HistoryEntry* _tmp30_ = NULL;
		guint _tmp31_ = 0U;
		_tmp28_ = a;
		_tmp29_ = _tmp28_->duration;
		_tmp30_ = b;
		_tmp31_ = _tmp30_->duration;
		result = ((gint) _tmp29_) - ((gint) _tmp31_);
		return result;
	}
	_tmp32_ = a;
	_tmp33_ = _tmp32_->date;
	_tmp34_ = b;
	_tmp35_ = _tmp34_->date;
	_tmp36_ = g_date_time_compare (_tmp33_, _tmp35_);
	result = _tmp36_;
	return result;
}


static void score_dialog_size_changed_cb (ScoreDialog* self, GtkComboBox* combo) {
	GtkTreeIter iter = {0};
	GtkComboBox* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
	gint width = 0;
	gint height = 0;
	gint n_mines = 0;
	GtkComboBox* _tmp3_ = NULL;
	GtkTreeModel* _tmp4_ = NULL;
	GtkTreeModel* _tmp5_ = NULL;
	GtkTreeIter _tmp6_ = {0};
	gint _tmp7_ = 0;
	gint _tmp8_ = 0;
	gint _tmp9_ = 0;
	guint wins = 0U;
	guint loses = 0U;
	guint total = 0U;
	gdouble percentage = 0.0;
	GtkComboBox* _tmp10_ = NULL;
	GtkTreeModel* _tmp11_ = NULL;
	GtkTreeModel* _tmp12_ = NULL;
	GtkTreeIter _tmp13_ = {0};
	StatEntry* stat = NULL;
	History* _tmp14_ = NULL;
	gint _tmp15_ = 0;
	gint _tmp16_ = 0;
	gint _tmp17_ = 0;
	StatEntry* _tmp18_ = NULL;
	StatEntry* _tmp19_ = NULL;
	GtkLabel* _tmp29_ = NULL;
	const gchar* _tmp30_ = NULL;
	guint _tmp31_ = 0U;
	gchar* _tmp32_ = NULL;
	gchar* _tmp33_ = NULL;
	GtkLabel* _tmp34_ = NULL;
	const gchar* _tmp35_ = NULL;
	guint _tmp36_ = 0U;
	gchar* _tmp37_ = NULL;
	gchar* _tmp38_ = NULL;
	GtkLabel* _tmp39_ = NULL;
	const gchar* _tmp40_ = NULL;
	guint _tmp41_ = 0U;
	gchar* _tmp42_ = NULL;
	gchar* _tmp43_ = NULL;
	GtkLabel* _tmp44_ = NULL;
	const gchar* _tmp45_ = NULL;
	gdouble _tmp46_ = 0.0;
	gchar* _tmp47_ = NULL;
	gchar* _tmp48_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (combo != NULL);
	_tmp0_ = combo;
	_tmp2_ = gtk_combo_box_get_active_iter (_tmp0_, &_tmp1_);
	iter = _tmp1_;
	if (!_tmp2_) {
		return;
	}
	_tmp3_ = combo;
	_tmp4_ = gtk_combo_box_get_model (_tmp3_);
	_tmp5_ = _tmp4_;
	_tmp6_ = iter;
	gtk_tree_model_get (_tmp5_, &_tmp6_, 1, &width, 2, &height, 3, &n_mines, -1);
	_tmp7_ = width;
	_tmp8_ = height;
	_tmp9_ = n_mines;
	score_dialog_set_size (self, (guint) _tmp7_, (guint) _tmp8_, (guint) _tmp9_);
	wins = (guint) 0;
	loses = (guint) 0;
	total = (guint) 0;
	percentage = 0.0;
	_tmp10_ = self->priv->size_combo;
	_tmp11_ = gtk_combo_box_get_model (_tmp10_);
	_tmp12_ = _tmp11_;
	_tmp13_ = iter;
	gtk_tree_model_get (_tmp12_, &_tmp13_, 1, &width, 2, &height, 3, &n_mines, -1);
	_tmp14_ = self->priv->history;
	_tmp15_ = width;
	_tmp16_ = height;
	_tmp17_ = n_mines;
	_tmp18_ = history_find_stat (_tmp14_, (guint) _tmp15_, (guint) _tmp16_, (guint) _tmp17_);
	stat = _tmp18_;
	_tmp19_ = stat;
	if (_tmp19_ != NULL) {
		StatEntry* _tmp20_ = NULL;
		guint _tmp21_ = 0U;
		StatEntry* _tmp22_ = NULL;
		guint _tmp23_ = 0U;
		guint _tmp24_ = 0U;
		guint _tmp25_ = 0U;
		guint _tmp26_ = 0U;
		_tmp20_ = stat;
		_tmp21_ = _tmp20_->wins;
		wins = _tmp21_;
		_tmp22_ = stat;
		_tmp23_ = _tmp22_->loses;
		loses = _tmp23_;
		_tmp24_ = wins;
		_tmp25_ = loses;
		total = _tmp24_ + _tmp25_;
		_tmp26_ = total;
		if (_tmp26_ > ((guint) 0)) {
			guint _tmp27_ = 0U;
			guint _tmp28_ = 0U;
			_tmp27_ = wins;
			_tmp28_ = total;
			percentage = (_tmp27_ * 100) / ((gdouble) _tmp28_);
		}
	}
	_tmp29_ = self->priv->wins_label;
	_tmp30_ = _ ("Wins");
	_tmp31_ = wins;
	_tmp32_ = g_strdup_printf ("%s: %u", _tmp30_, _tmp31_);
	_tmp33_ = _tmp32_;
	gtk_label_set_text (_tmp29_, _tmp33_);
	_g_free0 (_tmp33_);
	_tmp34_ = self->priv->loses_label;
	_tmp35_ = _ ("Loses");
	_tmp36_ = loses;
	_tmp37_ = g_strdup_printf ("%s: %u", _tmp35_, _tmp36_);
	_tmp38_ = _tmp37_;
	gtk_label_set_text (_tmp34_, _tmp38_);
	_g_free0 (_tmp38_);
	_tmp39_ = self->priv->total_label;
	_tmp40_ = _ ("Total");
	_tmp41_ = total;
	_tmp42_ = g_strdup_printf ("%s: %u", _tmp40_, _tmp41_);
	_tmp43_ = _tmp42_;
	gtk_label_set_text (_tmp39_, _tmp43_);
	_g_free0 (_tmp43_);
	_tmp44_ = self->priv->percentage_label;
	_tmp45_ = _ ("Percentage");
	_tmp46_ = percentage;
	_tmp47_ = g_strdup_printf ("%s: %.2f%%", _tmp45_, _tmp46_);
	_tmp48_ = _tmp47_;
	gtk_label_set_text (_tmp44_, _tmp48_);
	_g_free0 (_tmp48_);
	_stat_entry_unref0 (stat);
}


static void score_dialog_entry_added_cb (ScoreDialog* self, HistoryEntry* entry) {
	GtkTreeIter iter = {0};
	gboolean have_size_entry = FALSE;
	GtkListStore* _tmp0_ = NULL;
	GtkTreeIter _tmp1_ = {0};
	gboolean _tmp2_ = FALSE;
	gboolean _tmp22_ = FALSE;
	g_return_if_fail (self != NULL);
	g_return_if_fail (entry != NULL);
	have_size_entry = FALSE;
	_tmp0_ = self->priv->size_model;
	_tmp2_ = gtk_tree_model_get_iter_first ((GtkTreeModel*) _tmp0_, &_tmp1_);
	iter = _tmp1_;
	if (_tmp2_) {
		{
			gboolean _tmp3_ = FALSE;
			_tmp3_ = TRUE;
			while (TRUE) {
				gboolean _tmp4_ = FALSE;
				gint width = 0;
				gint height = 0;
				gint n_mines = 0;
				GtkListStore* _tmp7_ = NULL;
				GtkTreeIter _tmp8_ = {0};
				gboolean _tmp9_ = FALSE;
				gboolean _tmp10_ = FALSE;
				gint _tmp11_ = 0;
				HistoryEntry* _tmp12_ = NULL;
				guint _tmp13_ = 0U;
				gboolean _tmp17_ = FALSE;
				gboolean _tmp21_ = FALSE;
				_tmp4_ = _tmp3_;
				if (!_tmp4_) {
					GtkListStore* _tmp5_ = NULL;
					gboolean _tmp6_ = FALSE;
					_tmp5_ = self->priv->size_model;
					_tmp6_ = gtk_tree_model_iter_next ((GtkTreeModel*) _tmp5_, &iter);
					if (!_tmp6_) {
						break;
					}
				}
				_tmp3_ = FALSE;
				_tmp7_ = self->priv->size_model;
				_tmp8_ = iter;
				gtk_tree_model_get ((GtkTreeModel*) _tmp7_, &_tmp8_, 1, &width, 2, &height, 3, &n_mines, -1);
				_tmp11_ = width;
				_tmp12_ = entry;
				_tmp13_ = _tmp12_->width;
				if (((guint) _tmp11_) == _tmp13_) {
					gint _tmp14_ = 0;
					HistoryEntry* _tmp15_ = NULL;
					guint _tmp16_ = 0U;
					_tmp14_ = height;
					_tmp15_ = entry;
					_tmp16_ = _tmp15_->height;
					_tmp10_ = ((guint) _tmp14_) == _tmp16_;
				} else {
					_tmp10_ = FALSE;
				}
				_tmp17_ = _tmp10_;
				if (_tmp17_) {
					gint _tmp18_ = 0;
					HistoryEntry* _tmp19_ = NULL;
					guint _tmp20_ = 0U;
					_tmp18_ = n_mines;
					_tmp19_ = entry;
					_tmp20_ = _tmp19_->n_mines;
					_tmp9_ = ((guint) _tmp18_) == _tmp20_;
				} else {
					_tmp9_ = FALSE;
				}
				_tmp21_ = _tmp9_;
				if (_tmp21_) {
					have_size_entry = TRUE;
					break;
				}
			}
		}
	}
	_tmp22_ = have_size_entry;
	if (!_tmp22_) {
		gchar* label = NULL;
		HistoryEntry* _tmp23_ = NULL;
		guint _tmp24_ = 0U;
		const gchar* _tmp25_ = NULL;
		HistoryEntry* _tmp26_ = NULL;
		guint _tmp27_ = 0U;
		HistoryEntry* _tmp28_ = NULL;
		guint _tmp29_ = 0U;
		HistoryEntry* _tmp30_ = NULL;
		guint _tmp31_ = 0U;
		gchar* _tmp32_ = NULL;
		GtkListStore* _tmp33_ = NULL;
		GtkTreeIter _tmp34_ = {0};
		GtkListStore* _tmp35_ = NULL;
		GtkTreeIter _tmp36_ = {0};
		const gchar* _tmp37_ = NULL;
		HistoryEntry* _tmp38_ = NULL;
		guint _tmp39_ = 0U;
		HistoryEntry* _tmp40_ = NULL;
		guint _tmp41_ = 0U;
		HistoryEntry* _tmp42_ = NULL;
		guint _tmp43_ = 0U;
		GtkComboBox* _tmp44_ = NULL;
		gint _tmp45_ = 0;
		gboolean _tmp48_ = FALSE;
		gboolean _tmp49_ = FALSE;
		gboolean _tmp50_ = FALSE;
		HistoryEntry* _tmp51_ = NULL;
		gboolean _tmp56_ = FALSE;
		gboolean _tmp61_ = FALSE;
		gboolean _tmp66_ = FALSE;
		_tmp23_ = entry;
		_tmp24_ = _tmp23_->n_mines;
		_tmp25_ = ngettext ("%u  %u, %u mine", "%u  %u, %u mines", (gulong) _tmp24_);
		_tmp26_ = entry;
		_tmp27_ = _tmp26_->width;
		_tmp28_ = entry;
		_tmp29_ = _tmp28_->height;
		_tmp30_ = entry;
		_tmp31_ = _tmp30_->n_mines;
		_tmp32_ = g_strdup_printf (_tmp25_, _tmp27_, _tmp29_, _tmp31_);
		label = _tmp32_;
		_tmp33_ = self->priv->size_model;
		gtk_list_store_append (_tmp33_, &_tmp34_);
		iter = _tmp34_;
		_tmp35_ = self->priv->size_model;
		_tmp36_ = iter;
		_tmp37_ = label;
		_tmp38_ = entry;
		_tmp39_ = _tmp38_->width;
		_tmp40_ = entry;
		_tmp41_ = _tmp40_->height;
		_tmp42_ = entry;
		_tmp43_ = _tmp42_->n_mines;
		gtk_list_store_set (_tmp35_, &_tmp36_, 0, _tmp37_, 1, _tmp39_, 2, _tmp41_, 3, _tmp43_, -1);
		_tmp44_ = self->priv->size_combo;
		_tmp45_ = gtk_combo_box_get_active (_tmp44_);
		if (_tmp45_ == (-1)) {
			GtkComboBox* _tmp46_ = NULL;
			GtkTreeIter _tmp47_ = {0};
			_tmp46_ = self->priv->size_combo;
			_tmp47_ = iter;
			gtk_combo_box_set_active_iter (_tmp46_, &_tmp47_);
		}
		_tmp51_ = self->priv->selected_entry;
		if (_tmp51_ != NULL) {
			HistoryEntry* _tmp52_ = NULL;
			guint _tmp53_ = 0U;
			HistoryEntry* _tmp54_ = NULL;
			guint _tmp55_ = 0U;
			_tmp52_ = entry;
			_tmp53_ = _tmp52_->width;
			_tmp54_ = self->priv->selected_entry;
			_tmp55_ = _tmp54_->width;
			_tmp50_ = _tmp53_ == _tmp55_;
		} else {
			_tmp50_ = FALSE;
		}
		_tmp56_ = _tmp50_;
		if (_tmp56_) {
			HistoryEntry* _tmp57_ = NULL;
			guint _tmp58_ = 0U;
			HistoryEntry* _tmp59_ = NULL;
			guint _tmp60_ = 0U;
			_tmp57_ = entry;
			_tmp58_ = _tmp57_->height;
			_tmp59_ = self->priv->selected_entry;
			_tmp60_ = _tmp59_->height;
			_tmp49_ = _tmp58_ == _tmp60_;
		} else {
			_tmp49_ = FALSE;
		}
		_tmp61_ = _tmp49_;
		if (_tmp61_) {
			HistoryEntry* _tmp62_ = NULL;
			guint _tmp63_ = 0U;
			HistoryEntry* _tmp64_ = NULL;
			guint _tmp65_ = 0U;
			_tmp62_ = entry;
			_tmp63_ = _tmp62_->n_mines;
			_tmp64_ = self->priv->selected_entry;
			_tmp65_ = _tmp64_->n_mines;
			_tmp48_ = _tmp63_ == _tmp65_;
		} else {
			_tmp48_ = FALSE;
		}
		_tmp66_ = _tmp48_;
		if (_tmp66_) {
			GtkComboBox* _tmp67_ = NULL;
			GtkTreeIter _tmp68_ = {0};
			_tmp67_ = self->priv->size_combo;
			_tmp68_ = iter;
			gtk_combo_box_set_active_iter (_tmp67_, &_tmp68_);
		}
		_g_free0 (label);
	}
}


static void score_dialog_class_init (ScoreDialogClass * klass) {
	score_dialog_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (ScoreDialogPrivate));
	G_OBJECT_CLASS (klass)->finalize = score_dialog_finalize;
}


static void score_dialog_instance_init (ScoreDialog * self) {
	self->priv = SCORE_DIALOG_GET_PRIVATE (self);
	self->priv->selected_entry = NULL;
}


static void score_dialog_finalize (GObject* obj) {
	ScoreDialog * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, TYPE_SCORE_DIALOG, ScoreDialog);
	_history_unref0 (self->priv->history);
	_history_entry_unref0 (self->priv->selected_entry);
	_g_object_unref0 (self->priv->size_model);
	_g_object_unref0 (self->priv->score_model);
	_g_object_unref0 (self->priv->size_combo);
	_g_object_unref0 (self->priv->wins_label);
	_g_object_unref0 (self->priv->loses_label);
	_g_object_unref0 (self->priv->total_label);
	_g_object_unref0 (self->priv->percentage_label);
	G_OBJECT_CLASS (score_dialog_parent_class)->finalize (obj);
}


GType score_dialog_get_type (void) {
	static volatile gsize score_dialog_type_id__volatile = 0;
	if (g_once_init_enter (&score_dialog_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ScoreDialogClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) score_dialog_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ScoreDialog), 0, (GInstanceInitFunc) score_dialog_instance_init, NULL };
		GType score_dialog_type_id;
		score_dialog_type_id = g_type_register_static (GTK_TYPE_DIALOG, "ScoreDialog", &g_define_type_info, 0);
		g_once_init_leave (&score_dialog_type_id__volatile, score_dialog_type_id);
	}
	return score_dialog_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



